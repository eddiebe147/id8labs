<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Blueprint — Interactive Build Plans</title>
<style>
  :root {
    --bg: #111827;
    --bg-elevated: #1a2235;
    --bg-card: #1e283d;
    --bg-card-hover: #243049;
    --text-primary: #e2e8f0;
    --text-secondary: #94a3b8;
    --text-muted: #4b5c78;
    --border-subtle: #253248;
    --border-visible: #324360;
    --accent: #ef6f2e;
    --accent-hover: #ee6018;
    --amber: #f59e0b;
    --teal: #4ecdc4;
    --cyan: #06b6d4;
    --red: #ef4444;
    --grid-minor: rgba(70, 100, 160, 0.06);
    --grid-major: rgba(70, 100, 160, 0.13);
    --font-sans: 'Geist', -apple-system, 'Segoe UI', system-ui, sans-serif;
    --font-mono: 'Geist Mono', 'SF Mono', 'Fira Code', monospace;
  }

  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
  html { scroll-behavior: smooth; }

  body {
    background-color: var(--bg);
    background-image:
      linear-gradient(var(--grid-minor) 1px, transparent 1px),
      linear-gradient(90deg, var(--grid-minor) 1px, transparent 1px),
      linear-gradient(var(--grid-major) 1px, transparent 1px),
      linear-gradient(90deg, var(--grid-major) 1px, transparent 1px);
    background-size: 24px 24px, 24px 24px, 120px 120px, 120px 120px;
    background-attachment: fixed;
    color: var(--text-primary);
    font-family: var(--font-mono);
    font-size: 14px;
    line-height: 1.6;
    min-height: 100vh;
    -webkit-font-smoothing: antialiased;
  }

  h1, h2, h3, h4 {
    font-family: var(--font-sans);
    font-weight: 400;
    color: var(--text-primary);
  }
  h1 { font-size: 36px; letter-spacing: -2px; line-height: 1.1; }
  h2 { font-size: 24px; letter-spacing: -1.5px; line-height: 1.2; margin-bottom: 16px; }
  h3 { font-size: 18px; letter-spacing: -1px; line-height: 1.3; margin-bottom: 12px; }
  h4 { font-size: 15px; letter-spacing: -0.5px; margin-bottom: 8px; }
  a { color: var(--accent); text-decoration: none; }
  a:hover { color: var(--accent-hover); }

  .container { max-width: 1200px; margin: 0 auto; padding: 40px 32px; }

  /* Header */
  .header { margin-bottom: 32px; }
  .header-top { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 8px; }
  .header-subtitle { color: var(--text-secondary); font-size: 14px; margin-top: 4px; }
  .header-meta { color: var(--text-muted); font-size: 12px; margin-top: 12px; }

  /* Section indicators */
  .section-dot { display: inline-block; width: 6px; height: 6px; border-radius: 50%; background: var(--accent); margin-right: 10px; vertical-align: middle; animation: pulse 2s ease-in-out infinite; }
  @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.4; } }
  .section-label { font-size: 10px; letter-spacing: 0.15em; text-transform: uppercase; color: var(--text-muted); font-family: var(--font-mono); }

  /* Install Banner */
  .install-banner {
    background: var(--bg-elevated);
    border: 1px solid var(--border-subtle);
    border-left: 3px solid var(--teal);
    border-radius: 4px;
    padding: 24px;
    margin-bottom: 32px;
  }
  .install-banner h3 { color: var(--teal); margin-bottom: 8px; }
  .install-banner p { color: var(--text-secondary); font-size: 13px; margin-bottom: 16px; line-height: 1.7; }
  .install-toggle {
    background: var(--border-subtle);
    border: 1px solid var(--border-visible);
    color: var(--text-primary);
    font-family: var(--font-mono);
    font-size: 12px;
    padding: 8px 16px;
    border-radius: 3px;
    cursor: pointer;
    transition: background 0.2s;
  }
  .install-toggle:hover { background: var(--border-visible); }
  .install-content {
    display: none;
    margin-top: 0;
  }
  .install-content.visible { display: block; }

  /* Progress bar */
  .progress-container { margin: 16px 0 20px; }
  .progress-stats { display: flex; justify-content: space-between; align-items: baseline; margin-bottom: 8px; }
  .progress-label { font-size: 12px; color: var(--text-muted); text-transform: uppercase; letter-spacing: 1px; }
  .progress-value { font-size: 20px; color: var(--accent); font-family: var(--font-mono); }
  .progress-bar-track { height: 4px; background: var(--border-subtle); border-radius: 2px; overflow: hidden; }
  .progress-bar-fill { height: 100%; background: var(--accent); border-radius: 2px; transition: width 0.4s ease; width: 0%; }

  /* Stats grid */
  .stats-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px; margin-bottom: 16px; }
  .stat-card {
    background: var(--bg-card);
    border: 1px solid var(--border-subtle);
    border-radius: 4px;
    padding: 20px;
  }
  .stat-value { font-size: 28px; font-family: var(--font-mono); color: var(--accent); margin-bottom: 4px; }
  .stat-label { font-size: 10px; text-transform: uppercase; letter-spacing: 0.1em; color: var(--text-muted); }

  /* Tabs */
  .tabs {
    display: flex;
    gap: 2px;
    margin-bottom: 32px;
    border-bottom: 1px solid var(--border-subtle);
    overflow-x: auto;
  }
  .tab-btn {
    background: none;
    border: none;
    color: var(--text-muted);
    font-family: var(--font-mono);
    font-size: 13px;
    padding: 12px 20px;
    cursor: pointer;
    position: relative;
    white-space: nowrap;
    transition: color 0.2s;
    text-transform: uppercase;
    letter-spacing: 1px;
  }
  .tab-btn:hover { color: var(--text-secondary); }
  .tab-btn.active { color: var(--accent); }
  .tab-btn.active::after {
    content: '';
    position: absolute;
    bottom: -1px;
    left: 0;
    right: 0;
    height: 2px;
    background: var(--accent);
  }
  .tab-panel { display: none; }
  .tab-panel.active { display: block; animation: fadeIn 0.3s ease; }
  @keyframes fadeIn { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }

  /* Meta callout — explains what a section does */
  .meta-callout {
    background: rgba(239, 111, 46, 0.05);
    border: 1px solid rgba(239, 111, 46, 0.18);
    border-left: 3px solid rgba(239, 111, 46, 0.4);
    border-radius: 4px;
    padding: 16px 20px;
    margin: 16px 0 24px;
    font-size: 13px;
    color: var(--text-secondary);
    line-height: 1.7;
  }
  .meta-callout strong { color: var(--accent); font-weight: 600; }
  .meta-callout code {
    background: var(--bg-elevated);
    padding: 1px 6px;
    border-radius: 2px;
    font-size: 12px;
    color: var(--text-primary);
  }

  /* Cards */
  .card {
    background: var(--bg-card);
    border: 1px solid var(--border-subtle);
    border-radius: 4px;
    padding: 24px;
    margin-bottom: 16px;
  }
  .card:hover { border-color: var(--border-visible); background: var(--bg-card-hover); }

  /* Phase cards */
  .phase-card {
    background: var(--bg-card);
    border: 1px solid var(--border-subtle);
    border-radius: 4px;
    padding: 24px;
    margin-bottom: 24px;
  }
  .phase-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 4px; }
  .phase-badge {
    font-size: 9px;
    letter-spacing: 0.1em;
    padding: 3px 10px;
    border-radius: 2px;
    font-weight: 600;
    text-transform: uppercase;
  }
  .phase-badge.not-started { background: rgba(90, 85, 80, 0.2); color: var(--text-muted); }
  .phase-badge.in-progress { background: rgba(239, 111, 46, 0.15); color: var(--accent); }
  .phase-badge.complete { background: rgba(78, 205, 196, 0.15); color: var(--teal); }
  .dependency-line {
    font-size: 11px;
    color: var(--text-secondary);
    padding: 4px 0 12px;
    border-bottom: 1px solid var(--border-subtle);
    margin-bottom: 16px;
  }
  .dep-tag { color: var(--amber); }
  .no-dep { color: var(--teal); }

  /* Task items */
  .task-item {
    display: flex;
    align-items: flex-start;
    gap: 12px;
    padding: 10px 0;
    border-bottom: 1px solid rgba(42, 42, 42, 0.5);
  }
  .task-item:last-child { border-bottom: none; }
  .task-checkbox {
    appearance: none;
    width: 16px;
    height: 16px;
    border: 1.5px solid var(--border-visible);
    border-radius: 3px;
    background: transparent;
    cursor: pointer;
    position: relative;
    flex-shrink: 0;
    margin-top: 2px;
  }
  .task-checkbox:checked { background: var(--teal); border-color: var(--teal); }
  .task-checkbox:checked::after {
    content: '';
    position: absolute;
    top: 2px;
    left: 5px;
    width: 4px;
    height: 8px;
    border: solid var(--bg);
    border-width: 0 2px 2px 0;
    transform: rotate(45deg);
  }
  .task-label { flex: 1; font-size: 13px; color: var(--text-primary); }
  .task-item.completed .task-label {
    text-decoration: line-through;
    color: var(--text-muted);
  }

  /* Phase-level task cards in Tasks tab */
  .phase-task-card.completed {
    opacity: 0.4;
    border-color: var(--teal);
  }
  .phase-task-card.completed .phase-task-list div {
    text-decoration: line-through;
    color: var(--text-muted);
  }
  .phase-task-card.completed .prompt-block {
    opacity: 0.3;
    pointer-events: none;
  }

  /* Prompt blocks — charcoal gray for clear "this is copyable" separation */
  .prompt-block {
    position: relative;
    background: #1a1a1e;
    border: 1px solid #2a2a30;
    border-left: 3px solid var(--accent);
    border-radius: 4px;
    padding: 16px;
    margin: 8px 0 4px;
    font-family: var(--font-mono);
    font-size: 12px;
    line-height: 1.6;
    color: #b0b0b8;
    max-height: 300px;
    overflow-y: auto;
    white-space: pre-wrap;
    word-wrap: break-word;
  }
  .copy-btn {
    position: absolute;
    top: 8px;
    right: 8px;
    background: var(--border-subtle);
    border: 1px solid var(--border-visible);
    color: var(--text-secondary);
    font-family: var(--font-mono);
    font-size: 10px;
    padding: 4px 10px;
    border-radius: 2px;
    cursor: pointer;
    transition: all 0.2s;
  }
  .copy-btn:hover { background: var(--border-visible); color: var(--text-primary); }
  .copy-btn.copied { color: var(--teal); border-color: var(--teal); }

  /* Parallel batch columns */
  .parallel-group {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 16px;
    margin: 16px 0;
  }
  .batch-column {
    border: 1px solid var(--border-subtle);
    border-radius: 4px;
    padding: 20px;
    background: var(--bg-elevated);
    position: relative;
  }
  .batch-column::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 3px;
    border-radius: 4px 4px 0 0;
  }
  .batch-column.batch-a::before { background: var(--accent); }
  .batch-column.batch-b::before { background: var(--teal); }
  .batch-label {
    font-size: 9px;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    margin-bottom: 12px;
  }
  .batch-column.batch-a .batch-label { color: var(--accent); }
  .batch-column.batch-b .batch-label { color: var(--teal); }
  .sync-point {
    text-align: center;
    padding: 12px 0;
    color: var(--text-muted);
    font-size: 10px;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    position: relative;
  }
  .sync-point::before, .sync-point::after {
    content: '';
    position: absolute;
    top: 50%;
    height: 1px;
    width: calc(50% - 80px);
    background: var(--border-subtle);
  }
  .sync-point::before { left: 0; }
  .sync-point::after { right: 0; }

  /* Architecture diagrams */
  .arch-diagram {
    background: var(--bg-elevated);
    border: 1px solid var(--border-subtle);
    border-radius: 4px;
    padding: 32px;
    margin: 16px 0;
    text-align: center;
  }
  .arch-diagram svg { max-width: 100%; }

  /* Assessment sections */
  .assessment-section { margin-bottom: 32px; }
  .assessment-section h3 { display: flex; align-items: center; gap: 8px; }
  .severity-badge {
    font-size: 9px;
    letter-spacing: 0.1em;
    padding: 2px 8px;
    border-radius: 2px;
    font-weight: 600;
    text-transform: uppercase;
  }
  .severity-badge.critical { background: rgba(239, 68, 68, 0.15); color: var(--red); }
  .severity-badge.high { background: rgba(239, 111, 46, 0.15); color: var(--accent); }
  .severity-badge.medium { background: rgba(245, 158, 11, 0.15); color: var(--amber); }

  /* File map */
  .file-tree { font-family: var(--font-mono); font-size: 12px; color: var(--text-secondary); line-height: 2; }
  .file-tree .dir { color: var(--amber); }
  .file-tree .file { color: var(--text-primary); }
  .file-tree .phase-tag { color: var(--accent); font-size: 10px; }

  /* Decision cards */
  .decision-card {
    border-left: 3px solid var(--teal);
    padding: 12px 16px;
    background: var(--bg-elevated);
    margin: 8px 0;
    border-radius: 0 4px 4px 0;
  }
  .decision-card .chose { color: var(--teal); font-weight: 600; }
  .decision-card .over { color: var(--text-muted); }

  /* Responsive */
  @media (max-width: 768px) {
    .stats-grid { grid-template-columns: repeat(2, 1fr); }
    .parallel-group { grid-template-columns: 1fr; }
    h1 { font-size: 28px; }
    .container { padding: 24px 16px; }
  }

  /* Scrollbar */
  ::-webkit-scrollbar { width: 6px; height: 6px; }
  ::-webkit-scrollbar-track { background: var(--bg-elevated); }
  ::-webkit-scrollbar-thumb { background: var(--border-visible); border-radius: 3px; }
  ::-webkit-scrollbar-thumb:hover { background: #3e5575; }

  /* Strengths/assessment cards */
  .strength-card { border-left: 3px solid var(--teal); padding: 12px 16px; background: var(--bg-elevated); margin: 8px 0; border-radius: 0 4px 4px 0; }
  .risk-card { border-left: 3px solid var(--red); padding: 12px 16px; background: var(--bg-elevated); margin: 8px 0; border-radius: 0 4px 4px 0; }
  .opt-card { border-left: 3px solid var(--accent); padding: 12px 16px; background: var(--bg-elevated); margin: 8px 0; border-radius: 0 4px 4px 0; }

  /* Workflow steps */
  .workflow-section {
    background: var(--bg-elevated);
    border: 1px solid var(--border-subtle);
    border-radius: 4px;
    padding: 28px 32px;
    margin-bottom: 32px;
  }
  .workflow-section h3 { margin-bottom: 20px; }
  .workflow-steps {
    display: grid;
    grid-template-columns: 1fr auto 1fr auto 1fr;
    gap: 0;
    align-items: flex-start;
  }
  .workflow-step {
    text-align: center;
    padding: 0 12px;
  }
  .step-number {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: var(--font-mono);
    font-size: 16px;
    font-weight: 600;
    margin: 0 auto 12px;
  }
  .step-1 .step-number { background: rgba(239, 111, 46, 0.15); color: var(--accent); border: 1.5px solid var(--accent); }
  .step-2 .step-number { background: rgba(78, 205, 196, 0.15); color: var(--teal); border: 1.5px solid var(--teal); }
  .step-3 .step-number { background: rgba(245, 158, 11, 0.15); color: var(--amber); border: 1.5px solid var(--amber); }
  .step-title {
    font-family: var(--font-sans);
    font-size: 14px;
    font-weight: 400;
    margin-bottom: 6px;
  }
  .step-desc {
    font-size: 11px;
    color: var(--text-muted);
    line-height: 1.5;
  }
  .workflow-arrow {
    display: flex;
    align-items: center;
    justify-content: center;
    padding-top: 10px;
    color: var(--text-muted);
    font-size: 20px;
  }
  @media (max-width: 768px) {
    .workflow-steps { grid-template-columns: 1fr; gap: 16px; }
    .workflow-arrow { transform: rotate(90deg); padding: 0; }
  }

  /* Action sheet items */
  .action-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 10px 12px;
    background: var(--bg-elevated);
    border: 1px solid var(--border-subtle);
    border-radius: 4px;
    margin-bottom: 6px;
    transition: border-color 0.2s;
  }
  .action-item:hover { border-color: var(--border-visible); }
  .action-number {
    font-family: var(--font-mono);
    font-size: 11px;
    color: var(--text-muted);
    min-width: 24px;
    text-align: right;
  }
  .action-label { flex: 1; font-size: 12px; color: var(--text-secondary); }
  .action-label strong { color: var(--text-primary); font-weight: 600; }
  .action-phase {
    font-size: 9px;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    padding: 2px 8px;
    border-radius: 2px;
    white-space: nowrap;
  }
  .action-phase.seq { background: rgba(239, 111, 46, 0.1); color: var(--accent); }
  .action-phase.par-a { background: rgba(239, 111, 46, 0.15); color: var(--accent); }
  .action-phase.par-b { background: rgba(78, 205, 196, 0.15); color: var(--teal); }
  .action-copy-btn {
    background: var(--border-subtle);
    border: 1px solid var(--border-visible);
    color: var(--text-secondary);
    font-family: var(--font-mono);
    font-size: 9px;
    padding: 3px 10px;
    border-radius: 2px;
    cursor: pointer;
    transition: all 0.2s;
    white-space: nowrap;
  }
  .action-copy-btn:hover { background: var(--border-visible); color: var(--text-primary); }
  .action-copy-btn.copied { color: var(--teal); border-color: var(--teal); }
</style>
</head>
<body>
<div class="container">

  <!-- HEADER (slim) -->
  <div class="header" style="padding-bottom: 16px;">
    <div class="header-top">
      <div>
        <h1>Blueprint</h1>
        <div class="header-subtitle">Interactive Build Plans That Outlive Your Session</div>
      </div>
      <div style="display: flex; align-items: center; gap: 12px;">
        <button class="install-toggle" onclick="toggleInstall()" style="font-size: 10px; padding: 4px 12px;">Install Wizard</button>
        <span class="phase-badge not-started">Sample Report</span>
      </div>
    </div>
    <!-- Project metadata -->
    <div style="display: flex; flex-wrap: wrap; gap: 20px; margin-top: 14px; padding-top: 14px; border-top: 1px solid var(--border-subtle); font-size: 11px; color: var(--text-muted); font-family: var(--font-mono);">
      <div><span style="color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.1em; font-size: 9px;">Project</span><br><span style="color: var(--text-primary);">Sample Project</span></div>
      <div><span style="color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.1em; font-size: 9px;">Path</span><br><span style="color: var(--text-primary);">~/Development/my-project</span></div>
      <div><span style="color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.1em; font-size: 9px;">Branch</span><br><span style="color: var(--text-primary);">feature/sample-feature</span></div>
      <div><span style="color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.1em; font-size: 9px;">Created</span><br><span style="color: var(--text-primary);">2026-02-08</span></div>
      <div style="margin-left: auto;"><span style="color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.1em; font-size: 9px;">Updated</span><br><span style="color: var(--text-primary);">2026-02-08</span></div>
    </div>
  </div>

  <!-- INSTALL WIZARD (collapsed by default) -->
  <div id="install-content" class="install-content">
    <div class="install-banner" style="margin-bottom: 16px;">
      <h3>Install Wizard</h3>
      <p>
        Blueprint is a Claude Code slash command (<code>/blueprint</code>) that generates interactive HTML build plans.
        It interviews you about your project, explores your codebase, then generates a persistent artifact with
        checkboxes, copy-paste prompts, dependency graphs, and a senior dev assessment of your plan.
      </p>
      <p>
        To install it in your Claude Code environment, copy the prompt below and paste it into a new Claude Code session.
        It will walk you through setup &mdash; asking where you want files, what design preferences you have, etc.
      </p>
      <div class="prompt-block" id="install-prompt" style="max-height: 500px;">
        <button class="copy-btn" onclick="copyText('install-prompt')">COPY</button>
I need you to install the Blueprint build plan system in my Claude Code environment.
Blueprint is a /blueprint slash command that generates interactive HTML build plans
for projects and features. It was shared with me by Eddie Belaval (id8Labs).

Here is what you need to do:

## STEP 1: Interview me about my setup

Use AskUserQuestion to ask me the following:

Question 1 - "Where should I install the /blueprint command?"
Options:
- "~/.claude/commands/ (Recommended)" — Standard Claude Code custom commands directory
- "A different path" — I'll specify where my commands live
- "Explain how Claude Code commands work first" — Brief overview before deciding

Question 2 - "Where should blueprint artifacts (the HTML files) be saved?"
Options:
- "~/Development/artifacts/" — Organized by project subfolder
- "~/blueprints/" — Simple flat directory
- "Let me specify a custom path"

Question 3 - "Design theme preference for generated blueprints?"
Options:
- "Dark theme with warm neutrals (Recommended)" — Near-black backgrounds, warm grays, orange accent
- "Dark theme with cool tones" — Dark backgrounds, blue/gray palette
- "I'll define my own color scheme later" — Install with defaults, customize after
- "Match my existing design system" — I'll share my colors and you'll adapt

If they choose "Match my existing design system," ask a follow-up:
"Share your design tokens (background color, text color, accent color, font preference)
and I'll adapt the blueprint template to match."

## STEP 2: Write the /blueprint command file

Create the file at the path from Step 1. The full content of the command file is below.
IMPORTANT: Before writing, adapt these parts based on their answers:
- Replace artifact save paths with their chosen directory from Question 2
- Replace color values if they provided custom colors in Question 3
- If they chose cool tones, swap the palette:
  --accent: #3b82f6 (blue), --amber: #8b5cf6 (purple), --teal: #10b981 (emerald)

### BLUEPRINT COMMAND FILE CONTENT START ###

# /blueprint - Interactive Build Plan Generator

Generate a persistent, interactive HTML build plan that serves as the master
blueprint for an entire project or feature. Unlike session plans that die when
context fills up, blueprints are HTML artifacts that live on disk, track progress
with checkboxes, batch parallel work, and include copy-paste prompts for every task.

## Arguments
- [project-or-feature]: What to blueprint (can be rough description)
- Flags: --update (update existing), --from-plan &lt;file&gt; (seed from plan)

## Instructions

### Phase 1: Conversational Intake (Structured Interview)

Multi-round structured interview. Use AskUserQuestion to nail down specifics.

IMPORTANT: Actually explore the codebase between questions. Read files, check
the database schema, look at existing patterns. The blueprint should be grounded
in reality, not assumptions.

#### Round 1: Scope and Vision
- What are we building? (New project / New feature / Rebuild or refactor / Integration)
- What scale? (1-2 days / 3-5 days / 1-2 weeks / 2+ weeks)
- Who is the audience?

Then explore the codebase.

#### Round 2: Architecture Decisions
- Tech stack decisions (present 2-4 options with trade-offs)
- Data model (entities, schema)
- Integration points (external services, APIs)
- Auth/security model

#### Round 3: Phase Breakdown
- Propose phases with 1-line descriptions
- Confirm order, allow reorder/split/merge
- Definition of done for each phase
- Identify critical path

#### Round 4: Parallel Opportunities
- Identify independent tasks that can run simultaneously
- How many agents/sessions available? (1 / 2-3 / 4-5 / unlimited)
- Want batch prompts for distribution?

#### Round 5: Risks and Priorities
- Riskiest part of the build?
- Essential vs nice-to-have? (multiSelect)
- Hard deadlines or external dependencies?

#### Round 6: Confirmation
Summary of everything, then: Ready to generate? (Yes / Adjust phases / Change arch / Add context)

Only proceed to HTML generation after Round 6 confirmation.

### Phase 2: Generate the Blueprint HTML

Create a self-contained HTML file with these mandatory tabs:

#### Tab 1: OVERVIEW
- Project name and description
- Progress bar (auto-updates from checkbox state via localStorage)
- Phase count, task count, parallel efficiency score
- Tech stack badges, key dates

#### Tab 2: ARCHITECTURE
- Component diagram (SVG boxes and arrows)
- Data flow visualization
- File map organized by phase
- Key architecture decisions

#### Tab 3: PHASES (core)
Each phase is a card with:
- Status badge (NOT STARTED / IN PROGRESS / COMPLETE)
- Dependency line
- Sequential tasks with checkboxes and [COPY PROMPT] buttons
- Parallel batch columns (color-coded, side by side)
- Batch prompts for multi-task distribution
- Sync points between parallel groups
- Verification step

Checkbox state persists to localStorage. Completed tasks get strikethrough.

#### Tab 4: PARALLEL MAP
SVG dependency graph showing:
- All phases and their relationships
- Parallel batches visualized side-by-side
- Critical path highlighted
- Sync points marked

#### Tab 5: ASSESSMENT
Senior dev review of the PLAN:
1. Strengths (what is smart about this approach)
2. Risks and Gaps (with severity badges and fix prompts)
3. High-Impact Optimizations (ways to improve the build)
4. Prompts Summary (all prompts in one numbered list)

### Phase 3: Save and Open
Save to: [ARTIFACTS_DIR]/&lt;project&gt;/&lt;name&gt;-blueprint.html
Open automatically with: open &lt;filepath&gt;

### Phase 4: Update Flow (--update flag)
Read existing blueprint, parse state, regenerate with:
- New phases/tasks added
- Completed items preserved
- Progress recalculated
- Assessment updated

## Prompt Writing Rules
1. Self-contained (include full paths, context)
2. Scoped (one task per prompt)
3. Verifiable (end with verification step)
4. Context-aware (reference blueprint phase)
5. Parallel-safe (no conflicts within batch)

## Design System
Use these CSS custom properties (adapt to user preference):

:root {
  --bg: [BG_COLOR];
  --bg-elevated: [BG_ELEVATED];
  --bg-card: [BG_CARD];
  --text-primary: [TEXT_PRIMARY];
  --text-secondary: [TEXT_SECONDARY];
  --text-muted: [TEXT_MUTED];
  --border-subtle: [BORDER_SUBTLE];
  --border-visible: [BORDER_VISIBLE];
  --accent: [ACCENT];
  --amber: [AMBER];
  --teal: [TEAL];
}

Typography: Use system fonts. Headings: font-weight 400, tight letter-spacing.
No gradients, no box-shadows, no glow effects. Clean and minimal.

### BLUEPRINT COMMAND FILE CONTENT END ###

## STEP 3: Create the artifacts directory

Run: mkdir -p [their chosen artifacts directory]

If they chose the organized-by-project option, also create a few starter subfolders:
mkdir -p [artifacts]/_general

## STEP 4: Verify and confirm

1. Confirm the file was written: ls -la [command path]/blueprint.md
2. Tell them: "Blueprint is installed. Try it with: /blueprint [your project name]"
3. Explain: "It will interview you about your project, explore your codebase,
   then generate an interactive HTML build plan you can open in any browser."

## STEP 5: Optional design system customization

If they want to refine later, tell them:
"You can edit the Design System section in [command path]/blueprint.md anytime.
Just update the CSS custom properties to match your brand colors."</div>
    </div>
  </div>

  <!-- PROGRESS BAR -->
  <div class="progress-container">
    <div class="progress-stats">
      <span class="progress-label">Build Progress</span>
      <span class="progress-value" id="progress-value">0%</span>
    </div>
    <div class="progress-bar-track">
      <div class="progress-bar-fill" id="progress-fill"></div>
    </div>
  </div>

  <!-- STATS -->
  <div class="stats-grid">
    <div class="stat-card">
      <div class="stat-value" id="stat-phases">4</div>
      <div class="stat-label">Phases</div>
    </div>
    <div class="stat-card">
      <div class="stat-value" id="stat-tasks">12</div>
      <div class="stat-label">Tasks</div>
    </div>
    <div class="stat-card">
      <div class="stat-value" id="stat-parallel">58%</div>
      <div class="stat-label">Parallel Efficiency</div>
    </div>
    <div class="stat-card">
      <div class="stat-value" id="stat-complete">0%</div>
      <div class="stat-label">Complete</div>
    </div>
  </div>

  <!-- TABS -->
  <div class="tabs">
    <button class="tab-btn active" onclick="switchTab('overview')">Overview</button>
    <button class="tab-btn" onclick="switchTab('architecture')">Architecture</button>
    <button class="tab-btn" onclick="switchTab('phases')">Phases</button>
    <button class="tab-btn" onclick="switchTab('tasks')">Tasks</button>
    <button class="tab-btn" onclick="switchTab('prompts')">Prompts</button>
    <button class="tab-btn" onclick="switchTab('parallel')">Parallel Map</button>
    <button class="tab-btn" onclick="switchTab('assessment')">Assessment</button>
  </div>

  <!-- TAB: OVERVIEW -->
  <div class="tab-panel active" id="tab-overview">
    <div class="meta-callout">
      This is a self-documenting sample. Every section explains what it does in a real blueprint.
      Click around, check boxes, copy prompts &mdash; everything works. The progress bar above
      updates <strong>automatically</strong> as you check off phases. State persists to <code>localStorage</code>.
    </div>

    <!-- Project Summary -->
    <div class="card">
      <span class="section-dot"></span>
      <span class="section-label">Project Summary</span>
      <h2 style="margin-top: 12px;">Sample Project</h2>
      <p style="color: var(--text-secondary); margin-bottom: 16px;">
        In a real blueprint, this would be your project's description &mdash; generated from
        the Round 1 interview where Blueprint asks about scope, vision, and audience.
      </p>

      <h4 style="margin-top: 20px;">Tech Stack</h4>
      <div style="display: flex; gap: 8px; flex-wrap: wrap; margin-top: 8px;">
        <span style="background: var(--bg-elevated); border: 1px solid var(--border-subtle); padding: 4px 12px; border-radius: 2px; font-size: 11px; color: var(--text-secondary);">Next.js</span>
        <span style="background: var(--bg-elevated); border: 1px solid var(--border-subtle); padding: 4px 12px; border-radius: 2px; font-size: 11px; color: var(--text-secondary);">Supabase</span>
        <span style="background: var(--bg-elevated); border: 1px solid var(--border-subtle); padding: 4px 12px; border-radius: 2px; font-size: 11px; color: var(--text-secondary);">TypeScript</span>
        <span style="background: var(--bg-elevated); border: 1px solid var(--border-subtle); padding: 4px 12px; border-radius: 2px; font-size: 11px; color: var(--text-secondary);">Vercel</span>
      </div>
      <div style="margin-top: 8px; font-size: 11px; color: var(--text-muted);">
        These badges come from <strong style="color: var(--text-secondary);">Round 2: Architecture Decisions</strong>. Blueprint asks about your
        tech stack and presents 2-4 options with trade-offs for each choice.
      </div>
    </div>

    <!-- How It Works -->
    <div class="card">
      <span class="section-dot"></span>
      <span class="section-label">How It Works</span>
      <h3 style="margin-top: 12px;">The Blueprint Loop</h3>
      <p style="color: var(--text-secondary); font-size: 13px; margin-bottom: 20px;">
        Every phase in a blueprint follows this 3-step cycle. The prompts are pre-written and
        self-contained &mdash; you never need to explain context or re-describe the project.
      </p>
      <div class="workflow-steps">
        <div class="workflow-step step-1">
          <div class="step-number">1</div>
          <div class="step-title">Copy the Prompt</div>
          <div class="step-desc">
            Go to the Tasks tab. Each phase<br>
            has a COPY PHASE PROMPT button.<br>
            Click it. Full context included.
          </div>
        </div>
        <div class="workflow-arrow">&rarr;</div>
        <div class="workflow-step step-2">
          <div class="step-number">2</div>
          <div class="step-title">Paste into Claude Code</div>
          <div class="step-desc">
            Open a Claude Code session.<br>
            Paste the prompt. Claude builds<br>
            the entire phase. Verification included.
          </div>
        </div>
        <div class="workflow-arrow">&rarr;</div>
        <div class="workflow-step step-3">
          <div class="step-number">3</div>
          <div class="step-title">Check It Off</div>
          <div class="step-desc">
            Come back to the Tasks tab.<br>
            Check the phase checkbox.<br>
            Progress updates. Next phase.
          </div>
        </div>
      </div>
      <div style="margin-top: 20px; padding-top: 16px; border-top: 1px solid var(--border-subtle);">
        <p style="font-size: 12px; color: var(--text-muted); line-height: 1.7;">
          <strong style="color: var(--text-secondary);">For parallel batches:</strong>
          Some phases have independent batches that can run simultaneously across multiple Claude Code sessions
          or AI agents. The Phases tab shows the batch structure. The Tasks tab bundles everything into one prompt per phase.<br><br>
          <strong style="color: var(--text-secondary);">Prompts are self-contained.</strong>
          Every prompt includes the project path, which files to create or modify, what the previous phase
          established, and how to verify the work. A fresh session with zero context can execute any prompt.
        </p>
      </div>
    </div>

    <!-- Try It Demo -->
    <div class="card">
      <span class="section-dot" style="background: var(--amber);"></span>
      <span class="section-label">Try It</span>
      <p style="color: var(--text-secondary); font-size: 13px; margin: 12px 0 16px;">
        Walk through the loop with a real task from this blueprint:
      </p>

      <!-- Step 1: The Prompt -->
      <div style="margin-bottom: 16px;">
        <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
          <span style="width: 24px; height: 24px; font-size: 11px; border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; background: rgba(239, 111, 46, 0.15); color: var(--accent); border: 1.5px solid var(--accent);">1</span>
          <span style="font-size: 13px; color: var(--text-primary);">Copy this prompt</span>
        </div>
        <div class="prompt-block" id="prompt-demo" style="max-height: 140px;">
          <button class="copy-btn" onclick="copyText('prompt-demo')">COPY</button>
This is Phase 1, Task 1 of the Sample Project blueprint.
Create the database schema for the feature module.
Working directory: ~/Development/my-project

1. Create a new Supabase migration at supabase/migrations/
   - Table: features (id uuid, title text, description text, status text, created_at timestamptz)
   - Add RLS policy: users can only read/write their own rows
   - Add index on created_at for sorting

2. Generate TypeScript types: npx supabase gen types typescript > src/types/database.ts

Verification: Run `supabase db push` and confirm the table exists with `supabase db dump`</div>
      </div>

      <!-- Step 2: Explanation -->
      <div style="margin-bottom: 16px;">
        <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
          <span style="width: 24px; height: 24px; font-size: 11px; border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; background: rgba(78, 205, 196, 0.15); color: var(--teal); border: 1.5px solid var(--teal);">2</span>
          <span style="font-size: 13px; color: var(--text-primary);">Paste into Claude Code and let it work</span>
        </div>
        <div style="background: var(--bg-elevated); border: 1px solid var(--border-subtle); border-radius: 4px; padding: 10px 14px; font-size: 12px; color: var(--text-muted); font-style: italic;">
          Claude creates the migration, generates types, and confirms everything works. No extra context needed.
        </div>
      </div>

      <!-- Step 3: Check it off -->
      <div>
        <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
          <span style="width: 24px; height: 24px; font-size: 11px; border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; background: rgba(245, 158, 11, 0.15); color: var(--amber); border: 1.5px solid var(--amber);">3</span>
          <span style="font-size: 13px; color: var(--text-primary);">Check it off &mdash; try it:</span>
        </div>
        <div class="task-item" id="task-demo" style="background: var(--bg-elevated); border: 1px solid var(--border-subtle); border-radius: 4px; padding: 12px 16px;">
          <input type="checkbox" class="task-checkbox" id="cb-demo">
          <div class="task-label">
            <strong>Create database schema</strong>
            <br><span style="color: var(--text-secondary); font-size: 12px;">Define tables, relationships, and RLS policies</span>
          </div>
        </div>
        <div id="demo-feedback" style="margin-top: 8px; font-size: 12px; color: var(--text-muted); transition: all 0.3s;">
          Click the checkbox above to see what happens.
        </div>
      </div>
    </div>
  </div>

  <!-- TAB: ARCHITECTURE -->
  <div class="tab-panel" id="tab-architecture">
    <div class="meta-callout">
      <strong>ARCHITECTURE tab</strong> &mdash; This is your reference. Come here to remember how the pieces
      fit together. In a real blueprint, this contains actual SVG diagrams of your system, a file map showing
      every file that will be created or modified (organized by phase), and key architecture decisions with
      the reasoning behind each choice.
    </div>

    <!-- Component Diagram -->
    <div class="card">
      <span class="section-dot"></span>
      <span class="section-label">Component Diagram</span>
      <div class="arch-diagram" style="margin-top: 16px;">
        <svg width="700" height="220" viewBox="0 0 700 220">
          <!-- Client -->
          <rect x="260" y="10" width="180" height="50" rx="4" fill="none" stroke="#ef6f2e" stroke-width="1.5"/>
          <text x="350" y="40" text-anchor="middle" fill="#e2e8f0" font-family="Geist, system-ui" font-size="13" font-weight="400">Browser / Client</text>

          <!-- Arrow down -->
          <line x1="350" y1="60" x2="350" y2="90" stroke="#4b5c78" stroke-width="1" stroke-dasharray="4,3"/>
          <polygon points="345,88 350,95 355,88" fill="#4b5c78"/>

          <!-- API Layer -->
          <rect x="200" y="95" width="300" height="50" rx="4" fill="none" stroke="#4ecdc4" stroke-width="1.5"/>
          <text x="350" y="125" text-anchor="middle" fill="#e2e8f0" font-family="Geist, system-ui" font-size="13" font-weight="400">API Routes / Server</text>

          <!-- Arrows down -->
          <line x1="280" y1="145" x2="200" y2="175" stroke="#4b5c78" stroke-width="1" stroke-dasharray="4,3"/>
          <polygon points="196,172 200,180 205,173" fill="#4b5c78"/>
          <line x1="420" y1="145" x2="500" y2="175" stroke="#4b5c78" stroke-width="1" stroke-dasharray="4,3"/>
          <polygon points="495,173 500,180 504,172" fill="#4b5c78"/>

          <!-- Database -->
          <rect x="100" y="180" width="180" height="35" rx="4" fill="none" stroke="#f59e0b" stroke-width="1.5"/>
          <text x="190" y="202" text-anchor="middle" fill="#e2e8f0" font-family="Geist, system-ui" font-size="12" font-weight="400">Database</text>

          <!-- External -->
          <rect x="420" y="180" width="180" height="35" rx="4" fill="none" stroke="#06b6d4" stroke-width="1.5"/>
          <text x="510" y="202" text-anchor="middle" fill="#e2e8f0" font-family="Geist, system-ui" font-size="12" font-weight="400">External APIs</text>
        </svg>
      </div>
      <div class="meta-callout">
        In a real blueprint, this diagram shows <strong>your actual architecture</strong> &mdash; your specific
        services, databases, and integrations. Blueprint reads your codebase during the interview to understand
        existing patterns, then generates accurate diagrams. The SVG is embedded directly in the HTML (no
        external dependencies) and uses flowing dash animations on connection lines.
      </div>
    </div>

    <!-- File Map -->
    <div class="card">
      <span class="section-dot"></span>
      <span class="section-label">File Map</span>
      <div class="file-tree" style="margin-top: 16px; padding: 16px; background: var(--bg-elevated); border-radius: 4px;">
        <div><span class="dir">src/</span></div>
        <div>&nbsp;&nbsp;<span class="dir">app/</span></div>
        <div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="file">api/feature/route.ts</span> <span class="phase-tag">[Phase 1]</span></div>
        <div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="file">feature/page.tsx</span> <span class="phase-tag">[Phase 2]</span></div>
        <div>&nbsp;&nbsp;<span class="dir">components/</span></div>
        <div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="file">FeatureCard.tsx</span> <span class="phase-tag">[Phase 2, Batch A]</span></div>
        <div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="file">FeatureList.tsx</span> <span class="phase-tag">[Phase 2, Batch B]</span></div>
        <div>&nbsp;&nbsp;<span class="dir">lib/</span></div>
        <div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="file">feature-utils.ts</span> <span class="phase-tag">[Phase 1]</span></div>
      </div>
      <div class="meta-callout">
        The file map shows <strong>every file that will be created or modified</strong>, tagged with the phase
        (and batch, if parallel) where it happens. This answers: "What files does Phase 2 touch?"
        Parallel batch tags (like <code>[Phase 2, Batch A]</code>) ensure two agents don't edit the same file.
      </div>
    </div>

    <!-- Key Decisions -->
    <div class="card">
      <span class="section-dot"></span>
      <span class="section-label">Key Decisions</span>
      <div class="decision-card" style="margin-top: 16px;">
        <h4>API Design</h4>
        <p style="font-size: 12px; color: var(--text-secondary);">
          <span class="chose">Chose: Next.js API routes</span> <span class="over">over separate Express service</span>
        </p>
        <p style="font-size: 12px; color: var(--text-muted); margin-top: 4px;">
          Same-origin requests avoid CORS. One deploy target. No infrastructure overhead.
        </p>
      </div>
      <div class="meta-callout">
        Key decisions are mini <strong>Architecture Decision Records</strong> (ADRs) captured during the
        Round 2 interview. Blueprint presents options with trade-offs, you choose, and the reasoning is
        preserved here for future reference. When a new team member asks "why did we use X?", this answers it.
      </div>
    </div>
  </div>

  <!-- TAB: PHASES -->
  <div class="tab-panel" id="tab-phases">
    <div class="meta-callout">
      <strong>PHASES tab &mdash; This is where the work happens.</strong> Each task below has a prompt
      (the orange-bordered block) and a checkbox. The workflow is simple:<br><br>
      1. Find your next unchecked task<br>
      2. Click <strong>COPY</strong> on the prompt<br>
      3. Paste it into a Claude Code session &mdash; it has everything needed, no extra context required<br>
      4. When the work is done, come back and <strong>check the box</strong><br>
      5. The progress bar at the top updates automatically<br><br>
      <strong>Try it now</strong> &mdash; check a box below and watch the header update. Copy a prompt and see
      that it's fully self-contained with paths, context, and a verification step at the end.
    </div>

    <!-- PHASE 1: Sequential -->
    <div class="phase-card">
      <div class="phase-header">
        <h3>Phase 1: Foundation Setup</h3>
        <span class="phase-badge not-started" id="badge-p1">Not Started</span>
      </div>
      <div class="dependency-line">
        <span class="no-dep">No dependencies &mdash; can start immediately</span>
      </div>
      <p style="color: var(--text-secondary); font-size: 13px; margin-bottom: 16px;">
        Establishes the project skeleton, database schema, and core utilities.
        These tasks must be done sequentially because each builds on the previous.
      </p>

      <div class="meta-callout">
        <strong>Sequential tasks</strong> are listed in order. Task 2 depends on Task 1, etc.
        Each task has a [COPY PROMPT] button containing a self-contained prompt you can paste
        into a fresh Claude Code session. The prompt includes the full project path, file references,
        and a verification step. Try copying one below.
      </div>

      <div class="task-item" id="task-p1t1">
        <input type="checkbox" class="task-checkbox" id="cb-p1t1">
        <div class="task-label">
          <strong>Create database schema</strong>
          <br><span style="color: var(--text-secondary); font-size: 12px;">Define tables, relationships, and RLS policies</span>
          <div class="prompt-block" id="prompt-p1t1">
            <button class="copy-btn" onclick="copyText('prompt-p1t1')">COPY</button>
This is Phase 1, Task 1 of the [Project] blueprint.

Create the database schema for [feature]. Working directory: ~/Development/[project]

1. Create a new Supabase migration:
   - Table: [table_name] with columns: id (uuid), created_at, updated_at, [fields]
   - Add RLS policies for authenticated users
   - Add indexes on frequently queried columns

2. Generate TypeScript types from the schema

Verification: Run `supabase db push` and verify tables exist with `supabase db dump`</div>
        </div>
      </div>

      <div class="task-item" id="task-p1t2">
        <input type="checkbox" class="task-checkbox" id="cb-p1t2">
        <div class="task-label">
          <strong>Build API route</strong>
          <br><span style="color: var(--text-secondary); font-size: 12px;">REST endpoint with validation and error handling</span>
          <div class="prompt-block" id="prompt-p1t2">
            <button class="copy-btn" onclick="copyText('prompt-p1t2')">COPY</button>
This is Phase 1, Task 2 of the [Project] blueprint.
Previous task established the database schema.

Create the API route at src/app/api/[feature]/route.ts

1. GET handler: fetch all records for authenticated user
2. POST handler: create new record with input validation
3. Use the types generated in Task 1

Verification: Test with `curl http://localhost:3000/api/[feature]`</div>
        </div>
      </div>

      <div class="task-item" id="task-p1t3">
        <input type="checkbox" class="task-checkbox" id="cb-p1t3">
        <div class="task-label">
          <strong>Create utility functions</strong>
          <br><span style="color: var(--text-secondary); font-size: 12px;">Shared helpers used by later phases</span>
          <div class="prompt-block" id="prompt-p1t3">
            <button class="copy-btn" onclick="copyText('prompt-p1t3')">COPY</button>
This is Phase 1, Task 3 of the [Project] blueprint.
Previous tasks established schema and API route.

Create src/lib/[feature]-utils.ts with:
1. Data transformation helpers
2. Validation functions
3. Type guards

Verification: Run `npx tsc --noEmit` to verify types compile</div>
        </div>
      </div>

      <!-- Verification -->
      <div style="margin-top: 20px; padding-top: 16px; border-top: 1px solid var(--border-subtle);">
        <div class="task-item" id="task-p1v">
          <input type="checkbox" class="task-checkbox" id="cb-p1v">
          <div class="task-label" style="color: var(--amber);">
            <strong>Phase 1 Verification</strong>
            <br><span style="color: var(--text-muted); font-size: 12px;">Confirm foundation is solid before building on it</span>
          </div>
        </div>
      </div>
    </div>

    <!-- PHASE 2: Parallel -->
    <div class="phase-card">
      <div class="phase-header">
        <h3>Phase 2: UI Components</h3>
        <span class="phase-badge not-started" id="badge-p2">Not Started</span>
      </div>
      <div class="dependency-line">
        Requires: <span class="dep-tag">Phase 1</span>
      </div>
      <p style="color: var(--text-secondary); font-size: 13px; margin-bottom: 16px;">
        Build the frontend components. These two batches can run in parallel because
        they touch different files and have no shared state.
      </p>

      <div class="meta-callout">
        <strong>Parallel batches</strong> appear side-by-side in columns. Each column is a "batch" that can be
        assigned to a separate Claude Code session or AI agent. The color-coded top border distinguishes them.
        A <strong>BATCH PROMPT</strong> at the bottom of each column contains all tasks for that batch in one
        copyable block. The <strong>sync point</strong> below reminds you to wait for all batches to finish
        before moving to the next phase.
      </div>

      <div class="parallel-group">
        <div class="batch-column batch-a">
          <div class="batch-label">Batch A &mdash; Display Components</div>
          <div class="task-item" id="task-p2t1">
            <input type="checkbox" class="task-checkbox" id="cb-p2t1">
            <div class="task-label">
              <strong>FeatureCard component</strong>
              <br><span style="color: var(--text-secondary); font-size: 12px;">Individual item display with actions</span>
            </div>
          </div>
          <div class="task-item" id="task-p2t2">
            <input type="checkbox" class="task-checkbox" id="cb-p2t2">
            <div class="task-label">
              <strong>FeatureList component</strong>
              <br><span style="color: var(--text-secondary); font-size: 12px;">Grid/list layout with filtering</span>
            </div>
          </div>
          <div class="prompt-block" id="prompt-p2ba" style="margin-top: 12px;">
            <button class="copy-btn" onclick="copyText('prompt-p2ba')">BATCH PROMPT</button>
This is Phase 2, Parallel Batch A of the [Project] blueprint.
Complete these 2 tasks (no dependencies on each other):

1. Create src/components/FeatureCard.tsx
   - Display individual item with title, description, metadata
   - Action buttons (edit, delete) with confirmation

2. Create src/components/FeatureList.tsx
   - Grid layout displaying FeatureCards
   - Filter/sort controls
   - Empty state

Verification: Both components render without errors on /feature page</div>
        </div>

        <div class="batch-column batch-b">
          <div class="batch-label">Batch B &mdash; Form Components</div>
          <div class="task-item" id="task-p2t3">
            <input type="checkbox" class="task-checkbox" id="cb-p2t3">
            <div class="task-label">
              <strong>CreateFeatureForm</strong>
              <br><span style="color: var(--text-secondary); font-size: 12px;">Input form with validation</span>
            </div>
          </div>
          <div class="task-item" id="task-p2t4">
            <input type="checkbox" class="task-checkbox" id="cb-p2t4">
            <div class="task-label">
              <strong>EditFeatureModal</strong>
              <br><span style="color: var(--text-secondary); font-size: 12px;">Modal dialog for inline editing</span>
            </div>
          </div>
          <div class="prompt-block" id="prompt-p2bb" style="margin-top: 12px;">
            <button class="copy-btn" onclick="copyText('prompt-p2bb')">BATCH PROMPT</button>
This is Phase 2, Parallel Batch B of the [Project] blueprint.
Complete these 2 tasks (no dependencies on each other):

1. Create src/components/CreateFeatureForm.tsx
   - Form fields matching the schema from Phase 1
   - Client-side validation before submit
   - Calls POST /api/[feature]

2. Create src/components/EditFeatureModal.tsx
   - Opens as a dialog/modal
   - Pre-populates with existing data
   - Calls PATCH /api/[feature]/[id]

Verification: Both forms submit successfully and data appears in the list</div>
        </div>
      </div>

      <div class="sync-point">Sync &mdash; Wait for both batches</div>

      <div style="margin-top: 8px; padding-top: 16px; border-top: 1px solid var(--border-subtle);">
        <div class="task-item" id="task-p2v">
          <input type="checkbox" class="task-checkbox" id="cb-p2v">
          <div class="task-label" style="color: var(--amber);">
            <strong>Phase 2 Verification</strong>
            <br><span style="color: var(--text-muted); font-size: 12px;">All components render, forms submit, data flows end-to-end</span>
          </div>
        </div>
      </div>
    </div>

    <!-- PHASE 3: Simple sequential -->
    <div class="phase-card">
      <div class="phase-header">
        <h3>Phase 3: Integration and Polish</h3>
        <span class="phase-badge not-started" id="badge-p3">Not Started</span>
      </div>
      <div class="dependency-line">
        Requires: <span class="dep-tag">Phase 1</span>, <span class="dep-tag">Phase 2</span>
      </div>
      <p style="color: var(--text-secondary); font-size: 13px; margin-bottom: 16px;">
        Wire everything together, add loading states, error handling, and responsive design.
      </p>

      <div class="task-item" id="task-p3t1">
        <input type="checkbox" class="task-checkbox" id="cb-p3t1">
        <div class="task-label">
          <strong>Connect page to API</strong>
          <br><span style="color: var(--text-secondary); font-size: 12px;">Wire data fetching, loading, and error states</span>
        </div>
      </div>
      <div class="task-item" id="task-p3t2">
        <input type="checkbox" class="task-checkbox" id="cb-p3t2">
        <div class="task-label">
          <strong>Responsive layout and polish</strong>
          <br><span style="color: var(--text-secondary); font-size: 12px;">Mobile breakpoints, transitions, empty states</span>
        </div>
      </div>

      <div style="margin-top: 20px; padding-top: 16px; border-top: 1px solid var(--border-subtle);">
        <div class="task-item" id="task-p3v">
          <input type="checkbox" class="task-checkbox" id="cb-p3v">
          <div class="task-label" style="color: var(--amber);">
            <strong>Phase 3 Verification</strong>
            <br><span style="color: var(--text-muted); font-size: 12px;">Full flow works on desktop and mobile</span>
          </div>
        </div>
      </div>
    </div>

    <!-- PHASE 4 -->
    <div class="phase-card">
      <div class="phase-header">
        <h3>Phase 4: Testing and Deploy</h3>
        <span class="phase-badge not-started" id="badge-p4">Not Started</span>
      </div>
      <div class="dependency-line">
        Requires: <span class="dep-tag">Phase 3</span>
      </div>

      <div class="task-item" id="task-p4t1">
        <input type="checkbox" class="task-checkbox" id="cb-p4t1">
        <div class="task-label">
          <strong>Write tests</strong>
          <br><span style="color: var(--text-secondary); font-size: 12px;">Unit tests for utils, integration tests for API</span>
        </div>
      </div>
      <div class="task-item" id="task-p4t2">
        <input type="checkbox" class="task-checkbox" id="cb-p4t2">
        <div class="task-label">
          <strong>Deploy to production</strong>
          <br><span style="color: var(--text-secondary); font-size: 12px;">Push schema, merge PR, verify in production</span>
        </div>
      </div>

      <div style="margin-top: 20px; padding-top: 16px; border-top: 1px solid var(--border-subtle);">
        <div class="task-item" id="task-p4v">
          <input type="checkbox" class="task-checkbox" id="cb-p4v">
          <div class="task-label" style="color: var(--amber);">
            <strong>Phase 4 Verification</strong>
            <br><span style="color: var(--text-muted); font-size: 12px;">All tests pass, production is live and working</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- TAB: TASKS — Phase-Level Checklist -->
  <div class="tab-panel" id="tab-tasks">
    <div class="meta-callout">
      <strong>TASKS tab</strong> &mdash; Your phase-level checklist. Each phase is one prompt and one checkbox.
      Copy the prompt, paste it into Claude Code, let it build the entire phase, then check it off.
      The progress bar updates automatically. This is command center &mdash; what is done and what is next.
    </div>

    <!-- Phase 1 card -->
    <div class="phase-task-card" id="ptask-p1" style="background: var(--bg-card); border: 1px solid var(--border-subtle); border-radius: 4px; padding: 20px; margin-bottom: 16px;">
      <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px;">
        <input type="checkbox" class="task-checkbox tasks-phase-cb" id="cb-tl-p1" data-phase-tasks="cb-p1t1,cb-p1t2,cb-p1t3,cb-p1v">
        <div style="flex: 1;">
          <span style="font-size: 10px; letter-spacing: 0.15em; text-transform: uppercase; color: var(--accent); font-family: var(--font-mono);">Phase 1</span>
          <span style="font-size: 14px; color: var(--text-primary); margin-left: 8px;"><strong>Foundation Setup</strong></span>
        </div>
        <span class="phase-badge not-started" id="badge-tasks-p1">Not Started</span>
      </div>
      <div class="phase-task-list" style="padding-left: 36px; margin-bottom: 16px; color: var(--text-secondary); font-size: 12px; line-height: 2;">
        <div>Create database schema &mdash; tables, relationships, RLS policies</div>
        <div>Build API route &mdash; REST endpoint with validation and error handling</div>
        <div>Create utility functions &mdash; shared helpers used by later phases</div>
        <div style="color: var(--amber);">Verify: confirm foundation is solid before building on it</div>
      </div>
      <div class="prompt-block" id="prompt-phase-1" style="margin-left: 36px;">
        <button class="copy-btn" onclick="copyText('prompt-phase-1')">COPY PHASE PROMPT</button>
This is Phase 1 (Foundation Setup) of the [Project] blueprint.
Project path: ~/Development/[project]

Complete these 3 tasks in order:

1. Create the database schema in Supabase:
   - Define tables with proper column types and constraints
   - Add foreign key relationships
   - Create RLS policies for each table
   - Run the migration and verify tables exist

2. Build the API route at src/app/api/[feature]/route.ts:
   - Implement GET (list with filters) and POST (create with validation)
   - Use Supabase server client for auth context
   - Return proper HTTP status codes and error messages
   - Add input validation with zod or similar

3. Create shared utility functions at src/lib/[feature]-utils.ts:
   - Formatting helpers (dates, currencies, labels)
   - Validation functions reused across components
   - Type definitions shared between API and frontend

Verification: Run `npm run build &amp;&amp; npx tsc --noEmit` to confirm everything compiles. Query the API with curl to confirm GET returns an empty array and POST creates a record.</div>
    </div>

    <!-- Phase 2 card -->
    <div class="phase-task-card" id="ptask-p2" style="background: var(--bg-card); border: 1px solid var(--border-subtle); border-radius: 4px; padding: 20px; margin-bottom: 16px;">
      <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px;">
        <input type="checkbox" class="task-checkbox tasks-phase-cb" id="cb-tl-p2" data-phase-tasks="cb-p2t1,cb-p2t2,cb-p2t3,cb-p2t4,cb-p2v">
        <div style="flex: 1;">
          <span style="font-size: 10px; letter-spacing: 0.15em; text-transform: uppercase; color: var(--accent); font-family: var(--font-mono);">Phase 2</span>
          <span style="font-size: 14px; color: var(--text-primary); margin-left: 8px;"><strong>UI Components</strong></span>
          <span style="font-size: 9px; padding: 2px 8px; border-radius: 2px; background: rgba(78, 205, 196, 0.1); color: var(--teal); text-transform: uppercase; letter-spacing: 0.1em; margin-left: 8px;">Parallel</span>
        </div>
        <span class="phase-badge not-started" id="badge-tasks-p2">Not Started</span>
      </div>
      <div class="phase-task-list" style="padding-left: 36px; margin-bottom: 16px; color: var(--text-secondary); font-size: 12px; line-height: 2;">
        <div><span style="color: var(--accent);">[Batch A]</span> FeatureCard component &mdash; individual item display</div>
        <div><span style="color: var(--accent);">[Batch A]</span> FeatureList component &mdash; grid/list layout with filtering</div>
        <div><span style="color: var(--teal);">[Batch B]</span> CreateFeatureForm &mdash; input form with validation</div>
        <div><span style="color: var(--teal);">[Batch B]</span> EditFeatureModal &mdash; modal for inline editing</div>
        <div style="color: var(--amber);">Verify: all components render, forms submit, data flows end-to-end</div>
      </div>
      <div class="prompt-block" id="prompt-phase-2" style="margin-left: 36px;">
        <button class="copy-btn" onclick="copyText('prompt-phase-2')">COPY PHASE PROMPT</button>
This is Phase 2 (UI Components) of the [Project] blueprint.
Project path: ~/Development/[project]
Requires: Phase 1 complete (schema + API + utils exist).

Build these 4 components (Batch A and B are independent — build in any order):

Batch A — Display components:
1. src/components/FeatureCard.tsx — Card displaying a single item with key fields, status badge, and action buttons. Should accept the entity type from Phase 1 as props.
2. src/components/FeatureList.tsx — Grid/list view rendering multiple FeatureCards. Add search input filter and sort-by dropdown. Fetch data from GET /api/[feature].

Batch B — Form components:
3. src/components/CreateFeatureForm.tsx — Form with client-side validation. Calls POST /api/[feature]. Resets on success and shows a toast.
4. src/components/EditFeatureModal.tsx — Opens as a dialog. Pre-populates fields with existing data. Calls PATCH /api/[feature]/[id]. Closes on success.

Verification: Import all 4 into a test page. Confirm: list loads items, create form adds a new one (appears in list), edit modal updates it, card displays correctly.</div>
    </div>

    <!-- Phase 3 card -->
    <div class="phase-task-card" id="ptask-p3" style="background: var(--bg-card); border: 1px solid var(--border-subtle); border-radius: 4px; padding: 20px; margin-bottom: 16px;">
      <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px;">
        <input type="checkbox" class="task-checkbox tasks-phase-cb" id="cb-tl-p3" data-phase-tasks="cb-p3t1,cb-p3t2,cb-p3v">
        <div style="flex: 1;">
          <span style="font-size: 10px; letter-spacing: 0.15em; text-transform: uppercase; color: var(--accent); font-family: var(--font-mono);">Phase 3</span>
          <span style="font-size: 14px; color: var(--text-primary); margin-left: 8px;"><strong>Integration and Polish</strong></span>
        </div>
        <span class="phase-badge not-started" id="badge-tasks-p3">Not Started</span>
      </div>
      <div class="phase-task-list" style="padding-left: 36px; margin-bottom: 16px; color: var(--text-secondary); font-size: 12px; line-height: 2;">
        <div>Connect page to API &mdash; wire data fetching, loading, and error states</div>
        <div>Responsive layout and polish &mdash; mobile breakpoints, transitions, empty states</div>
        <div style="color: var(--amber);">Verify: full flow works on desktop and mobile</div>
      </div>
      <div class="prompt-block" id="prompt-phase-3" style="margin-left: 36px;">
        <button class="copy-btn" onclick="copyText('prompt-phase-3')">COPY PHASE PROMPT</button>
This is Phase 3 (Integration and Polish) of the [Project] blueprint.
Project path: ~/Development/[project]
Requires: Phase 1 + Phase 2 complete (schema, API, all components exist).

Complete these tasks:

1. Wire the main page (src/app/[feature]/page.tsx):
   - Import FeatureList, CreateFeatureForm from Phase 2
   - Add SWR or React Query for data fetching with loading skeleton
   - Handle error states (show message, retry button)
   - Add page title, breadcrumbs, and layout structure

2. Responsive design and polish:
   - Add mobile breakpoints (stack cards vertically below 768px)
   - Add transitions on card hover and form submit
   - Create empty state component (shown when no items exist)
   - Ensure form modals work on mobile (full-screen on small viewports)

Verification: Open the page in browser at both desktop (1280px) and mobile (390px) widths. Create an item, edit it, verify list updates. Check that loading skeleton shows briefly on refresh.</div>
    </div>

    <!-- Phase 4 card -->
    <div class="phase-task-card" id="ptask-p4" style="background: var(--bg-card); border: 1px solid var(--border-subtle); border-radius: 4px; padding: 20px; margin-bottom: 16px;">
      <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px;">
        <input type="checkbox" class="task-checkbox tasks-phase-cb" id="cb-tl-p4" data-phase-tasks="cb-p4t1,cb-p4t2,cb-p4v">
        <div style="flex: 1;">
          <span style="font-size: 10px; letter-spacing: 0.15em; text-transform: uppercase; color: var(--accent); font-family: var(--font-mono);">Phase 4</span>
          <span style="font-size: 14px; color: var(--text-primary); margin-left: 8px;"><strong>Testing and Deploy</strong></span>
        </div>
        <span class="phase-badge not-started" id="badge-tasks-p4">Not Started</span>
      </div>
      <div class="phase-task-list" style="padding-left: 36px; margin-bottom: 16px; color: var(--text-secondary); font-size: 12px; line-height: 2;">
        <div>Write tests &mdash; unit tests for utils, integration tests for API</div>
        <div>Deploy to production &mdash; push schema, merge PR, verify in production</div>
        <div style="color: var(--amber);">Verify: all tests pass, production is live and working</div>
      </div>
      <div class="prompt-block" id="prompt-phase-4" style="margin-left: 36px;">
        <button class="copy-btn" onclick="copyText('prompt-phase-4')">COPY PHASE PROMPT</button>
This is Phase 4 (Testing and Deploy) of the [Project] blueprint.
Project path: ~/Development/[project]
Requires: Phase 3 complete (full integration working locally).

Complete these tasks:

1. Write tests:
   - Unit tests for utility functions from Phase 1 (src/lib/__tests__/)
   - Integration tests for the API route (test GET, POST, PATCH, DELETE)
   - Component tests for at least FeatureCard and CreateFeatureForm
   - Use vitest or jest, whichever the project already uses

2. Deploy to production:
   - Run `npm run build &amp;&amp; npx tsc --noEmit` to confirm clean build
   - Push the Supabase migration: `supabase db push`
   - Create PR: `gh pr create --title "[Feature] Complete feature build"`
   - After PR approval, merge and verify on production URL

Verification: All tests pass (`npm test`). Production URL loads the feature page, CRUD operations work, no console errors.</div>
    </div>
  </div>

  <!-- TAB: PROMPTS — All prompts in order -->
  <div class="tab-panel" id="tab-prompts">
    <div class="meta-callout">
      <strong>PROMPTS tab</strong> &mdash; Every prompt from this build, in execution order. Each one is
      self-contained &mdash; copy it, paste it into a Claude Code session, and it has everything needed
      to do the work. No extra context required. After each prompt completes, check it off in the Tasks tab.
    </div>

    <!-- Prompt 1 -->
    <div style="margin-bottom: 24px;">
      <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 8px;">
        <span style="background: var(--bg-card); border: 1px solid var(--border-subtle); border-radius: 50%; width: 28px; height: 28px; display: inline-flex; align-items: center; justify-content: center; font-size: 11px; color: var(--text-muted); font-family: var(--font-mono);">1</span>
        <span style="font-size: 13px; color: var(--text-primary);"><strong>Create database schema</strong></span>
        <span class="action-phase seq" style="margin-left: auto;">Phase 1</span>
      </div>
      <div class="prompt-block" id="prompt-pl-1">
        <button class="copy-btn" onclick="copyText('prompt-pl-1')">COPY</button>
This is Phase 1, Task 1 of the [Project] blueprint.

Create the database schema for [feature]. Working directory: ~/Development/[project]

1. Create a new Supabase migration:
   - Table: [table_name] with columns: id (uuid), created_at, updated_at, [fields]
   - Add RLS policies for authenticated users
   - Add indexes on frequently queried columns

2. Generate TypeScript types from the schema

Verification: Run `supabase db push` and verify tables exist with `supabase db dump`</div>
    </div>

    <!-- Prompt 2 -->
    <div style="margin-bottom: 24px;">
      <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 8px;">
        <span style="background: var(--bg-card); border: 1px solid var(--border-subtle); border-radius: 50%; width: 28px; height: 28px; display: inline-flex; align-items: center; justify-content: center; font-size: 11px; color: var(--text-muted); font-family: var(--font-mono);">2</span>
        <span style="font-size: 13px; color: var(--text-primary);"><strong>Build API route</strong></span>
        <span class="action-phase seq" style="margin-left: auto;">Phase 1</span>
      </div>
      <div class="prompt-block" id="prompt-pl-2">
        <button class="copy-btn" onclick="copyText('prompt-pl-2')">COPY</button>
This is Phase 1, Task 2 of the [Project] blueprint.
Previous task established the database schema.

Create the API route at src/app/api/[feature]/route.ts

1. GET handler: fetch all records for authenticated user
2. POST handler: create new record with input validation
3. Use the types generated in Task 1

Verification: Test with `curl http://localhost:3000/api/[feature]`</div>
    </div>

    <!-- Prompt 3 -->
    <div style="margin-bottom: 24px;">
      <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 8px;">
        <span style="background: var(--bg-card); border: 1px solid var(--border-subtle); border-radius: 50%; width: 28px; height: 28px; display: inline-flex; align-items: center; justify-content: center; font-size: 11px; color: var(--text-muted); font-family: var(--font-mono);">3</span>
        <span style="font-size: 13px; color: var(--text-primary);"><strong>Create utility functions</strong></span>
        <span class="action-phase seq" style="margin-left: auto;">Phase 1</span>
      </div>
      <div class="prompt-block" id="prompt-pl-3">
        <button class="copy-btn" onclick="copyText('prompt-pl-3')">COPY</button>
This is Phase 1, Task 3 of the [Project] blueprint.
Previous tasks established schema and API route.

Create src/lib/[feature]-utils.ts with:
1. Data transformation helpers
2. Validation functions
3. Type guards

Verification: Run `npx tsc --noEmit` to verify types compile</div>
    </div>

    <!-- Parallel divider -->
    <div style="display: flex; align-items: center; gap: 16px; margin: 28px 0 20px;">
      <div style="flex: 1; height: 1px; background: var(--border-subtle);"></div>
      <span style="font-size: 9px; letter-spacing: 0.15em; text-transform: uppercase; color: var(--teal);">Phase 2 &mdash; These two can run in parallel</span>
      <div style="flex: 1; height: 1px; background: var(--border-subtle);"></div>
    </div>

    <!-- Prompt 4 (Batch A) -->
    <div style="margin-bottom: 24px;">
      <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 8px;">
        <span style="background: rgba(239, 111, 46, 0.15); border: 1px solid var(--accent); border-radius: 50%; width: 28px; height: 28px; display: inline-flex; align-items: center; justify-content: center; font-size: 11px; color: var(--accent); font-family: var(--font-mono);">4</span>
        <span style="font-size: 13px; color: var(--text-primary);"><strong>Batch A: Display components</strong></span>
        <span class="action-phase par-a" style="margin-left: auto;">Batch A</span>
      </div>
      <div class="prompt-block" id="prompt-pl-4" style="border-left-color: var(--accent);">
        <button class="copy-btn" onclick="copyText('prompt-pl-4')">COPY BATCH</button>
This is Phase 2, Parallel Batch A of the [Project] blueprint.
Complete these 2 tasks (no dependencies on each other):

1. Create src/components/FeatureCard.tsx
   - Display individual item with title, description, metadata
   - Action buttons (edit, delete) with confirmation

2. Create src/components/FeatureList.tsx
   - Grid layout displaying FeatureCards
   - Filter/sort controls
   - Empty state

Verification: Both components render without errors on /feature page</div>
    </div>

    <!-- Prompt 5 (Batch B) -->
    <div style="margin-bottom: 24px;">
      <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 8px;">
        <span style="background: rgba(78, 205, 196, 0.15); border: 1px solid var(--teal); border-radius: 50%; width: 28px; height: 28px; display: inline-flex; align-items: center; justify-content: center; font-size: 11px; color: var(--teal); font-family: var(--font-mono);">5</span>
        <span style="font-size: 13px; color: var(--text-primary);"><strong>Batch B: Form components</strong></span>
        <span class="action-phase par-b" style="margin-left: auto;">Batch B</span>
      </div>
      <div class="prompt-block" id="prompt-pl-5" style="border-left-color: var(--teal);">
        <button class="copy-btn" onclick="copyText('prompt-pl-5')">COPY BATCH</button>
This is Phase 2, Parallel Batch B of the [Project] blueprint.
Complete these 2 tasks (no dependencies on each other):

1. Create src/components/CreateFeatureForm.tsx
   - Form fields matching the schema from Phase 1
   - Client-side validation before submit
   - Calls POST /api/[feature]

2. Create src/components/EditFeatureModal.tsx
   - Opens as a dialog/modal
   - Pre-populates with existing data
   - Calls PATCH /api/[feature]/[id]

Verification: Both forms submit successfully and data appears in the list</div>
    </div>

    <!-- Sync -->
    <div class="sync-point">Sync &mdash; Wait for both batches before Phase 3</div>

    <!-- Prompt 6 -->
    <div style="margin-bottom: 24px; margin-top: 20px;">
      <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 8px;">
        <span style="background: var(--bg-card); border: 1px solid var(--border-subtle); border-radius: 50%; width: 28px; height: 28px; display: inline-flex; align-items: center; justify-content: center; font-size: 11px; color: var(--text-muted); font-family: var(--font-mono);">6</span>
        <span style="font-size: 13px; color: var(--text-primary);"><strong>Connect page to API</strong></span>
        <span class="action-phase seq" style="margin-left: auto;">Phase 3</span>
      </div>
      <div class="prompt-block" id="prompt-pl-6">
        <button class="copy-btn" onclick="copyText('prompt-pl-6')">COPY</button>
This is Phase 3, Task 1 of the [Project] blueprint.
Phase 1 established the schema, API, and utilities.
Phase 2 built all UI components (FeatureCard, FeatureList, CreateForm, EditModal).

Now wire the feature page at src/app/feature/page.tsx:
1. Server-side data fetching from the API route
2. Pass data to FeatureList component
3. Loading states while data fetches
4. Error boundary for failed requests
5. Optimistic updates on create/edit/delete

Verification: Full CRUD works end-to-end — create, read, update, delete all reflect immediately.</div>
    </div>

    <!-- Prompt 7 -->
    <div style="margin-bottom: 24px;">
      <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 8px;">
        <span style="background: var(--bg-card); border: 1px solid var(--border-subtle); border-radius: 50%; width: 28px; height: 28px; display: inline-flex; align-items: center; justify-content: center; font-size: 11px; color: var(--text-muted); font-family: var(--font-mono);">7</span>
        <span style="font-size: 13px; color: var(--text-primary);"><strong>Responsive layout and polish</strong></span>
        <span class="action-phase seq" style="margin-left: auto;">Phase 3</span>
      </div>
      <div class="prompt-block" id="prompt-pl-7">
        <button class="copy-btn" onclick="copyText('prompt-pl-7')">COPY</button>
This is Phase 3, Task 2 of the [Project] blueprint.

Polish the feature page for production:
1. Mobile breakpoints (test at 390px width)
2. Smooth transitions on list filter/sort changes
3. Empty state when no items exist
4. Skeleton loading states
5. Responsive grid columns (3 on desktop, 2 tablet, 1 mobile)

Verification: Screenshot at 1440px, 768px, and 390px widths. All look clean.</div>
    </div>

    <!-- Prompt 8 -->
    <div style="margin-bottom: 24px;">
      <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 8px;">
        <span style="background: var(--bg-card); border: 1px solid var(--border-subtle); border-radius: 50%; width: 28px; height: 28px; display: inline-flex; align-items: center; justify-content: center; font-size: 11px; color: var(--text-muted); font-family: var(--font-mono);">8</span>
        <span style="font-size: 13px; color: var(--text-primary);"><strong>Write tests</strong></span>
        <span class="action-phase seq" style="margin-left: auto;">Phase 4</span>
      </div>
      <div class="prompt-block" id="prompt-pl-8">
        <button class="copy-btn" onclick="copyText('prompt-pl-8')">COPY</button>
This is Phase 4, Task 1 of the [Project] blueprint.

Write tests for the feature module:
1. Unit tests for src/lib/[feature]-utils.ts (all transform/validate functions)
2. Integration test for GET /api/[feature] (returns user's records)
3. Integration test for POST /api/[feature] (validates input, creates record)
4. Component test for FeatureCard (renders title, description, action buttons)

Verification: Run `npm test` — all tests pass with zero failures.</div>
    </div>

    <!-- Prompt 9 -->
    <div style="margin-bottom: 24px;">
      <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 8px;">
        <span style="background: var(--bg-card); border: 1px solid var(--border-subtle); border-radius: 50%; width: 28px; height: 28px; display: inline-flex; align-items: center; justify-content: center; font-size: 11px; color: var(--text-muted); font-family: var(--font-mono);">9</span>
        <span style="font-size: 13px; color: var(--text-primary);"><strong>Deploy to production</strong></span>
        <span class="action-phase seq" style="margin-left: auto;">Phase 4</span>
      </div>
      <div class="prompt-block" id="prompt-pl-9">
        <button class="copy-btn" onclick="copyText('prompt-pl-9')">COPY</button>
This is Phase 4, Task 2 (final) of the [Project] blueprint.

Deploy the feature to production:
1. Run `supabase db push` to apply migrations to production
2. Run `npm run build` to verify no build errors
3. Create PR: `gh pr create --title "feat: [feature] module"`
4. After review, merge: `gh pr merge --squash`
5. Verify on production URL that the feature works end-to-end

Verification: Visit [production-url]/feature — create, edit, and delete an item.</div>
    </div>
  </div>

  <!-- TAB: PARALLEL MAP -->
  <div class="tab-panel" id="tab-parallel">
    <div class="meta-callout">
      <strong>PARALLEL MAP tab</strong> &mdash; This answers two questions: "What's the critical path?" and
      "Where can we throw more agents at it?" The SVG graph shows phases as nodes, dependency arrows between
      them, and parallel batches visualized side-by-side. The critical path (the longest chain of sequential
      dependencies) is highlighted in orange. Parallel opportunities are shown in teal.
    </div>

    <div class="arch-diagram">
      <svg width="700" height="340" viewBox="0 0 700 340">
        <defs>
          <marker id="arrow" viewBox="0 0 10 7" refX="10" refY="3.5" markerWidth="8" markerHeight="6" orient="auto">
            <polygon points="0 0, 10 3.5, 0 7" fill="#4b5c78"/>
          </marker>
          <marker id="arrow-accent" viewBox="0 0 10 7" refX="10" refY="3.5" markerWidth="8" markerHeight="6" orient="auto">
            <polygon points="0 0, 10 3.5, 0 7" fill="#ef6f2e"/>
          </marker>
        </defs>

        <!-- Phase 1 -->
        <rect x="250" y="10" width="200" height="44" rx="4" fill="none" stroke="#ef6f2e" stroke-width="1.5"/>
        <text x="350" y="28" text-anchor="middle" fill="#e2e8f0" font-family="Geist, system-ui" font-size="11" font-weight="400">PHASE 1</text>
        <text x="350" y="44" text-anchor="middle" fill="#94a3b8" font-family="Geist Mono, monospace" font-size="9">Foundation Setup (sequential)</text>

        <!-- Arrow Phase 1 -> Phase 2 -->
        <line x1="350" y1="54" x2="350" y2="90" stroke="#ef6f2e" stroke-width="1" stroke-dasharray="4,3" marker-end="url(#arrow-accent)"/>

        <!-- Phase 2 split -->
        <rect x="120" y="95" width="200" height="44" rx="4" fill="none" stroke="#ef6f2e" stroke-width="1.5"/>
        <text x="220" y="113" text-anchor="middle" fill="#e2e8f0" font-family="Geist, system-ui" font-size="11" font-weight="400">BATCH A</text>
        <text x="220" y="129" text-anchor="middle" fill="#ef6f2e" font-family="Geist Mono, monospace" font-size="9">Display Components</text>

        <rect x="380" y="95" width="200" height="44" rx="4" fill="none" stroke="#4ecdc4" stroke-width="1.5"/>
        <text x="480" y="113" text-anchor="middle" fill="#e2e8f0" font-family="Geist, system-ui" font-size="11" font-weight="400">BATCH B</text>
        <text x="480" y="129" text-anchor="middle" fill="#4ecdc4" font-family="Geist Mono, monospace" font-size="9">Form Components</text>

        <!-- Split arrows -->
        <line x1="300" y1="54" x2="220" y2="90" stroke="#ef6f2e" stroke-width="1" stroke-dasharray="4,3" marker-end="url(#arrow-accent)"/>
        <line x1="400" y1="54" x2="480" y2="90" stroke="#4ecdc4" stroke-width="1" stroke-dasharray="4,3"/>

        <!-- Sync line -->
        <line x1="80" y1="160" x2="620" y2="160" stroke="#4b5c78" stroke-width="1" stroke-dasharray="6,4"/>
        <text x="350" y="175" text-anchor="middle" fill="#4b5c78" font-family="Geist Mono, monospace" font-size="9" letter-spacing="2">SYNC POINT</text>

        <!-- Merge arrows -->
        <line x1="220" y1="139" x2="350" y2="195" stroke="#ef6f2e" stroke-width="1" stroke-dasharray="4,3" marker-end="url(#arrow-accent)"/>
        <line x1="480" y1="139" x2="350" y2="195" stroke="#4ecdc4" stroke-width="1" stroke-dasharray="4,3"/>

        <!-- Phase 3 -->
        <rect x="250" y="195" width="200" height="44" rx="4" fill="none" stroke="#ef6f2e" stroke-width="1.5"/>
        <text x="350" y="213" text-anchor="middle" fill="#e2e8f0" font-family="Geist, system-ui" font-size="11" font-weight="400">PHASE 3</text>
        <text x="350" y="229" text-anchor="middle" fill="#94a3b8" font-family="Geist Mono, monospace" font-size="9">Integration + Polish</text>

        <!-- Arrow Phase 3 -> Phase 4 -->
        <line x1="350" y1="239" x2="350" y2="275" stroke="#ef6f2e" stroke-width="1" stroke-dasharray="4,3" marker-end="url(#arrow-accent)"/>

        <!-- Phase 4 -->
        <rect x="250" y="280" width="200" height="44" rx="4" fill="none" stroke="#ef6f2e" stroke-width="1.5"/>
        <text x="350" y="298" text-anchor="middle" fill="#e2e8f0" font-family="Geist, system-ui" font-size="11" font-weight="400">PHASE 4</text>
        <text x="350" y="314" text-anchor="middle" fill="#94a3b8" font-family="Geist Mono, monospace" font-size="9">Testing + Deploy</text>

        <!-- Critical path label -->
        <text x="650" y="30" text-anchor="end" fill="#ef6f2e" font-family="Geist Mono, monospace" font-size="9">CRITICAL PATH</text>
        <line x1="580" y1="26" x2="640" y2="26" stroke="#ef6f2e" stroke-width="1.5"/>
        <text x="650" y="48" text-anchor="end" fill="#4ecdc4" font-family="Geist Mono, monospace" font-size="9">PARALLEL</text>
        <line x1="580" y1="44" x2="640" y2="44" stroke="#4ecdc4" stroke-width="1.5"/>
      </svg>
    </div>

    <div class="meta-callout">
      <strong>Reading the graph:</strong> Orange-bordered nodes and lines are the <strong>critical path</strong>
      &mdash; the longest chain of sequential dependencies. This determines the minimum build time.
      Teal nodes are <strong>parallelizable</strong> work that can happen simultaneously. The sync point
      marks where parallel work must converge before the next phase starts. In this sample, Phase 2's two
      batches run in parallel, giving us 58% parallel efficiency (4 tasks across 2 agents instead of
      4 sequential tasks).
    </div>
  </div>

  <!-- TAB: ASSESSMENT -->
  <div class="tab-panel" id="tab-assessment">
    <div class="meta-callout">
      <strong>ASSESSMENT tab</strong> &mdash; A senior dev review of the <em>plan itself</em> (not the code).
      This is generated by Claude after analyzing your codebase, your architecture choices, and the phase
      breakdown. It identifies what is smart, what is risky, what to optimize, and provides a clean numbered
      list of every prompt from the blueprint. This is your action sheet.
    </div>

    <!-- Strengths -->
    <div class="assessment-section">
      <h3><span class="section-dot" style="background: var(--teal);"></span> Strengths of This Plan</h3>
      <div class="strength-card" style="margin-top: 12px;">
        <h4>Sequential foundation before parallel work</h4>
        <p style="color: var(--text-secondary); font-size: 12px;">
          Phase 1 establishes schema, API, and utilities before any UI work begins.
          This prevents the most common source of parallel conflicts: two agents trying
          to define types or create shared utilities simultaneously.
        </p>
      </div>
      <div class="strength-card">
        <h4>Clean batch boundaries</h4>
        <p style="color: var(--text-secondary); font-size: 12px;">
          Batch A (display components) and Batch B (form components) touch completely
          different files. No risk of merge conflicts during parallel execution.
        </p>
      </div>
      <div class="meta-callout">
        Strengths are specific to <strong>your plan's architecture</strong>, not generic praise.
        Blueprint references actual file paths and patterns it found in your codebase.
      </div>
    </div>

    <!-- Risks -->
    <div class="assessment-section">
      <h3><span class="section-dot" style="background: var(--red);"></span> Risks and Gaps</h3>
      <div class="risk-card" style="margin-top: 12px;">
        <div style="display: flex; justify-content: space-between; align-items: center;">
          <h4>No error boundary strategy</h4>
          <span class="severity-badge high">HIGH</span>
        </div>
        <p style="color: var(--text-secondary); font-size: 12px; margin-top: 4px;">
          The plan creates UI components but doesn't specify error boundaries.
          A failed API call in FeatureList could crash the entire page.
        </p>
        <div class="prompt-block" id="prompt-risk1" style="margin-top: 8px;">
          <button class="copy-btn" onclick="copyText('prompt-risk1')">FIX PROMPT</button>
Add React error boundaries around FeatureList and CreateFeatureForm.
Create src/components/FeatureErrorBoundary.tsx that:
1. Catches render errors
2. Shows a retry button
3. Logs errors to console (or your monitoring service)

Verification: Temporarily throw an error in FeatureCard and verify the boundary catches it.</div>
      </div>

      <div class="risk-card">
        <div style="display: flex; justify-content: space-between; align-items: center;">
          <h4>Missing optimistic updates</h4>
          <span class="severity-badge medium">MEDIUM</span>
        </div>
        <p style="color: var(--text-secondary); font-size: 12px; margin-top: 4px;">
          Create and edit operations will feel sluggish without optimistic UI updates.
          Users see a loading spinner while waiting for the API round-trip.
        </p>
      </div>

      <div class="meta-callout">
        Each risk includes a <strong>severity badge</strong> (CRITICAL / HIGH / MEDIUM / LOW) and,
        for actionable risks, a <strong>fix prompt</strong> you can copy-paste to resolve it.
        Blueprint generates these by analyzing what is missing from the plan, not the code.
      </div>
    </div>

    <!-- Optimizations -->
    <div class="assessment-section">
      <h3><span class="section-dot" style="background: var(--accent);"></span> High-Impact Optimizations</h3>
      <div class="opt-card" style="margin-top: 12px;">
        <h4>1. Split Phase 3 into parallel batches</h4>
        <p style="color: var(--text-secondary); font-size: 12px;">
          "Connect page to API" and "responsive layout" can likely run in parallel
          if they touch different parts of the page component. This would increase
          parallel efficiency from 58% to ~70%.
        </p>
      </div>
      <div class="opt-card">
        <h4>2. Add Phase 0 for environment setup</h4>
        <p style="color: var(--text-secondary); font-size: 12px;">
          Create a phase for environment variables, Supabase project setup, and
          CI/CD configuration. This unblocks everything and can be verified independently.
        </p>
      </div>
    </div>

    <!-- Quick Reference -->
    <div class="assessment-section">
      <h3><span class="section-dot" style="background: var(--teal);"></span> Execution</h3>
      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-top: 12px;">
        <div style="background: var(--bg-elevated); border: 1px solid var(--border-subtle); border-radius: 4px; padding: 16px; cursor: pointer;" onclick="switchTab('tasks')">
          <h4 style="color: var(--amber);">Tasks Tab</h4>
          <p style="color: var(--text-muted); font-size: 12px; margin-top: 4px;">
            Checklist view. Check off tasks as you complete them.
            Strikethrough + gray out on completion.
          </p>
        </div>
        <div style="background: var(--bg-elevated); border: 1px solid var(--border-subtle); border-radius: 4px; padding: 16px; cursor: pointer;" onclick="switchTab('prompts')">
          <h4 style="color: var(--accent);">Prompts Tab</h4>
          <p style="color: var(--text-muted); font-size: 12px; margin-top: 4px;">
            All 9 prompts in order. Copy, paste into Claude Code, done.
            Includes batch prompts for parallel work.
          </p>
        </div>
      </div>
      <p style="font-size: 11px; color: var(--text-muted); margin-top: 12px;">
        9 task prompts + 1 risk fix prompt = 10 total actions in this build plan.
      </p>
    </div>
  </div>

</div>

<script>
var LS_KEY = 'blueprint-sample-report';
var checkboxState = {};

// Restore state from localStorage
try {
  var stored = localStorage.getItem(LS_KEY);
  if (stored) checkboxState = JSON.parse(stored);
} catch(e) { checkboxState = {}; }

// Initialize checkboxes
function initCheckboxes() {
  var boxes = document.querySelectorAll('.task-checkbox');
  for (var i = 0; i < boxes.length; i++) {
    var cb = boxes[i];
    if (checkboxState[cb.id]) {
      cb.checked = true;
      var item = cb.closest('.task-item');
      if (item) item.classList.add('completed');
    }
    // Restore phase-level Tasks tab checkboxes: check if all linked Phases tab tasks are done
    if (cb.classList.contains('tasks-phase-cb') && cb.dataset.phaseTasks) {
      var linkedIds = cb.dataset.phaseTasks.split(',');
      var allLinkedDone = true;
      for (var k = 0; k < linkedIds.length; k++) {
        if (!checkboxState[linkedIds[k]]) { allLinkedDone = false; break; }
      }
      if (allLinkedDone && linkedIds.length > 0) {
        cb.checked = true;
        var card = cb.closest('.phase-task-card');
        if (card) card.classList.add('completed');
      }
    }
    cb.addEventListener('change', function() {
      var isPhaseCheckbox = this.classList.contains('tasks-phase-cb');
      checkboxState[this.id] = this.checked;

      var item = this.closest('.task-item');
      if (item) {
        if (this.checked) item.classList.add('completed');
        else item.classList.remove('completed');
      }

      // Phase-level sync: Tasks tab phase checkbox -> all Phases tab task checkboxes
      if (isPhaseCheckbox && this.dataset.phaseTasks) {
        var card = this.closest('.phase-task-card');
        if (card) {
          if (this.checked) card.classList.add('completed');
          else card.classList.remove('completed');
        }
        var ids = this.dataset.phaseTasks.split(',');
        for (var j = 0; j < ids.length; j++) {
          var linked = document.getElementById(ids[j]);
          if (linked && linked.checked !== this.checked) {
            linked.checked = this.checked;
            checkboxState[linked.id] = this.checked;
            var linkedItem = linked.closest('.task-item');
            if (linkedItem) {
              if (this.checked) linkedItem.classList.add('completed');
              else linkedItem.classList.remove('completed');
            }
          }
        }
      } else if (!isPhaseCheckbox) {
        // Phases tab individual checkbox changed — sync back to Tasks tab phase checkbox
        var phaseCbs = document.querySelectorAll('.tasks-phase-cb');
        for (var j = 0; j < phaseCbs.length; j++) {
          var phIds = phaseCbs[j].dataset.phaseTasks ? phaseCbs[j].dataset.phaseTasks.split(',') : [];
          var allDone = true;
          for (var k = 0; k < phIds.length; k++) {
            var phCb = document.getElementById(phIds[k]);
            if (phCb && !phCb.checked) { allDone = false; break; }
          }
          if (phaseCbs[j].checked !== allDone) {
            phaseCbs[j].checked = allDone;
            checkboxState[phaseCbs[j].id] = allDone;
            var phCard = phaseCbs[j].closest('.phase-task-card');
            if (phCard) {
              if (allDone) phCard.classList.add('completed');
              else phCard.classList.remove('completed');
            }
          }
        }
      }

      // Demo feedback
      if (this.id === 'cb-demo') {
        var feedback = document.getElementById('demo-feedback');
        if (feedback) {
          if (this.checked) {
            feedback.textContent = 'Done. The task is struck through and grayed out. The progress bar updated. That is the entire loop \u2014 copy, paste, check. Now imagine 30 tasks across 7 phases, all pre-written.';
            feedback.style.color = 'var(--teal)';
          } else {
            feedback.textContent = 'Click the checkbox above to see what happens.';
            feedback.style.color = 'var(--text-muted)';
          }
        }
      }

      saveState();
      updateProgress();
      updatePhaseBadges();
      updateTasksBadges();
    });
  }
}

function saveState() {
  try { localStorage.setItem(LS_KEY, JSON.stringify(checkboxState)); } catch(e) {}
}

function getProgress() {
  // Only count Phases tab checkboxes (not Tasks tab duplicates or demo)
  var boxes = document.querySelectorAll('#tab-phases .task-checkbox');
  var total = boxes.length;
  var checked = 0;
  for (var i = 0; i < boxes.length; i++) {
    if (boxes[i].checked) checked++;
  }
  return { total: total, checked: checked, pct: total > 0 ? Math.round((checked / total) * 100) : 0 };
}

function updateProgress() {
  var p = getProgress();
  var fill = document.getElementById('progress-fill');
  var val = document.getElementById('progress-value');
  var statComplete = document.getElementById('stat-complete');
  if (fill) fill.style.width = p.pct + '%';
  if (val) val.textContent = p.pct + '%';
  if (statComplete) statComplete.textContent = p.pct + '%';
}

function updatePhaseBadges() {
  var phases = [
    { id: 'badge-p1', tasks: ['cb-p1t1','cb-p1t2','cb-p1t3','cb-p1v'] },
    { id: 'badge-p2', tasks: ['cb-p2t1','cb-p2t2','cb-p2t3','cb-p2t4','cb-p2v'] },
    { id: 'badge-p3', tasks: ['cb-p3t1','cb-p3t2','cb-p3v'] },
    { id: 'badge-p4', tasks: ['cb-p4t1','cb-p4t2','cb-p4v'] }
  ];
  for (var i = 0; i < phases.length; i++) {
    var badge = document.getElementById(phases[i].id);
    if (!badge) continue;
    var allDone = true, anyDone = false;
    for (var j = 0; j < phases[i].tasks.length; j++) {
      var cb = document.getElementById(phases[i].tasks[j]);
      if (cb && cb.checked) anyDone = true;
      else allDone = false;
    }
    badge.className = 'phase-badge';
    if (allDone) { badge.classList.add('complete'); badge.textContent = 'Complete'; }
    else if (anyDone) { badge.classList.add('in-progress'); badge.textContent = 'In Progress'; }
    else { badge.classList.add('not-started'); badge.textContent = 'Not Started'; }
  }
}

// Update Tasks tab phase badges (now just 1 checkbox per phase)
function updateTasksBadges() {
  var taskPhases = [
    { id: 'badge-tasks-p1', cb: 'cb-tl-p1' },
    { id: 'badge-tasks-p2', cb: 'cb-tl-p2' },
    { id: 'badge-tasks-p3', cb: 'cb-tl-p3' },
    { id: 'badge-tasks-p4', cb: 'cb-tl-p4' }
  ];
  for (var i = 0; i < taskPhases.length; i++) {
    var badge = document.getElementById(taskPhases[i].id);
    var cb = document.getElementById(taskPhases[i].cb);
    if (!badge || !cb) continue;
    badge.className = 'phase-badge';
    if (cb.checked) { badge.classList.add('complete'); badge.textContent = 'Complete'; }
    else { badge.classList.add('not-started'); badge.textContent = 'Not Started'; }
  }
}

// Tab switching
function switchTab(tabId) {
  var btns = document.querySelectorAll('.tab-btn');
  var panels = document.querySelectorAll('.tab-panel');
  for (var i = 0; i < btns.length; i++) btns[i].classList.remove('active');
  for (var i = 0; i < panels.length; i++) panels[i].classList.remove('active');
  document.getElementById('tab-' + tabId).classList.add('active');
  var tabNames = ['overview','architecture','phases','tasks','prompts','parallel','assessment'];
  var idx = tabNames.indexOf(tabId);
  if (idx >= 0) btns[idx].classList.add('active');
}

// Copy to clipboard
function copyText(elementId) {
  var el = document.getElementById(elementId);
  if (!el) return;
  var text = el.textContent.replace('COPY','').replace('BATCH PROMPT','').replace('FIX PROMPT','').replace('COPIED','').trim();
  navigator.clipboard.writeText(text).then(function() {
    var btn = el.querySelector('.copy-btn');
    if (btn) {
      btn.textContent = 'COPIED';
      btn.classList.add('copied');
      setTimeout(function() { btn.textContent = btn.dataset.original || 'COPY'; btn.classList.remove('copied'); }, 2000);
    }
  });
}

// Copy from action sheet (references prompt blocks in Phases tab)
function copyAction(btn, promptId) {
  var el = document.getElementById(promptId);
  if (!el) return;
  var text = el.textContent.replace('COPY','').replace('BATCH PROMPT','').replace('FIX PROMPT','').replace('COPIED','').trim();
  var originalText = btn.textContent;
  navigator.clipboard.writeText(text).then(function() {
    btn.textContent = 'COPIED';
    btn.classList.add('copied');
    setTimeout(function() { btn.textContent = originalText; btn.classList.remove('copied'); }, 2000);
  });
}

// Save original button text
function initCopyButtons() {
  var btns = document.querySelectorAll('.copy-btn');
  for (var i = 0; i < btns.length; i++) {
    btns[i].dataset.original = btns[i].textContent;
  }
}

// Install prompt toggle
function toggleInstall() {
  var content = document.getElementById('install-content');
  var btn = document.querySelector('.install-toggle');
  if (content.classList.contains('visible')) {
    content.classList.remove('visible');
    btn.textContent = 'Install Wizard';
  } else {
    content.classList.add('visible');
    btn.textContent = 'Close Wizard';
  }
}

// Init
initCheckboxes();
initCopyButtons();
updateProgress();
updatePhaseBadges();
updateTasksBadges();
</script>
</body>
</html>