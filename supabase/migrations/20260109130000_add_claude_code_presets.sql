-- Add missing columns for Claude Code workflow presets
ALTER TABLE settings ADD COLUMN IF NOT EXISTS model TEXT;
ALTER TABLE settings ADD COLUMN IF NOT EXISTS max_tokens INTEGER;
ALTER TABLE settings ADD COLUMN IF NOT EXISTS temperature DECIMAL(3,2);
ALTER TABLE settings ADD COLUMN IF NOT EXISTS use_case TEXT;

-- Insert Claude Code workflow presets
INSERT INTO settings (slug, name, description, category, model, max_tokens, temperature, use_case, settings, tags, verified, featured, status) VALUES
(
  'production-safe',
  'Production Safe',
  'Conservative settings for production work with strict safety checks and limited tool access',
  'model',
  'claude-sonnet-4.5',
  8192,
  0.3,
  'Use for production debugging, code review, and analysis where you want to prevent accidental changes',
  '{"model": "claude-sonnet-4.5", "temperature": 0.3, "max_tokens": 8192, "tools_allowed": ["read", "grep", "glob", "ls"], "tools_restricted": ["execute", "edit", "create", "delete"], "safety_checks": true, "require_confirmation": true, "auto_save": false}',
  ARRAY['production', 'safe', 'conservative', 'read-only'],
  true,
  true,
  'published'
),
(
  'rapid-prototyping',
  'Rapid Prototyping',
  'Maximum speed and flexibility for fast development and experimentation',
  'model',
  'claude-sonnet-4.5',
  16384,
  0.7,
  'Perfect for MVPs, proof-of-concepts, and rapid iteration where speed matters more than safety',
  '{"model": "claude-sonnet-4.5", "temperature": 0.7, "max_tokens": 16384, "tools_allowed": ["all"], "tools_restricted": [], "safety_checks": false, "require_confirmation": false, "auto_save": true, "parallel_tool_calls": true}',
  ARRAY['fast', 'prototyping', 'development', 'experimental'],
  true,
  true,
  'published'
),
(
  'code-review-mode',
  'Code Review Mode',
  'Read-only analysis mode for comprehensive code review and documentation',
  'model',
  'claude-opus-4',
  32768,
  0.2,
  'Use for thorough code reviews, documentation generation, and codebase analysis',
  '{"model": "claude-opus-4", "temperature": 0.2, "max_tokens": 32768, "tools_allowed": ["read", "grep", "glob", "ls", "git"], "tools_restricted": ["execute", "edit", "create", "delete", "patch"], "safety_checks": true, "require_confirmation": false, "focus_mode": "analysis"}',
  ARRAY['review', 'analysis', 'read-only', 'documentation'],
  true,
  true,
  'published'
),
(
  'testing-mode',
  'Testing Mode',
  'Optimized for running tests with full execution permissions but restricted file modifications',
  'permissions',
  'claude-sonnet-4.5',
  12288,
  0.4,
  'Perfect for test-driven development, running test suites, and CI/CD debugging',
  '{"model": "claude-sonnet-4.5", "temperature": 0.4, "max_tokens": 12288, "tools_allowed": ["read", "execute", "grep", "glob", "ls", "git"], "tools_restricted": ["edit", "create", "delete", "patch"], "safety_checks": true, "require_confirmation": false, "test_framework_support": true, "allow_test_execution": true}',
  ARRAY['testing', 'qa', 'execution', 'ci-cd'],
  true,
  false,
  'published'
),
(
  'refactoring-expert',
  'Refactoring Expert',
  'Full editing permissions with emphasis on code transformation and improvements',
  'permissions',
  'claude-sonnet-4.5',
  16384,
  0.3,
  'Use for major refactoring, code restructuring, and architectural improvements',
  '{"model": "claude-sonnet-4.5", "temperature": 0.3, "max_tokens": 16384, "tools_allowed": ["all"], "tools_restricted": ["delete"], "safety_checks": true, "require_confirmation": true, "backup_before_edit": true, "track_changes": true}',
  ARRAY['refactoring', 'transformation', 'code-quality', 'improvement'],
  true,
  false,
  'published'
),
(
  'security-audit',
  'Security Audit',
  'Security-first settings with read-only access and vulnerability detection focus',
  'permissions',
  'claude-opus-4',
  32768,
  0.1,
  'Use for security audits, vulnerability scanning, and compliance checks',
  '{"model": "claude-opus-4", "temperature": 0.1, "max_tokens": 32768, "tools_allowed": ["read", "grep", "glob", "ls"], "tools_restricted": ["execute", "edit", "create", "delete", "patch"], "safety_checks": true, "require_confirmation": false, "security_focus": true, "check_secrets": true, "check_vulnerabilities": true}',
  ARRAY['security', 'audit', 'vulnerabilities', 'compliance'],
  true,
  true,
  'published'
),
(
  'large-codebase',
  'Large Codebase',
  'Optimized context settings for massive codebases with intelligent file prioritization',
  'context',
  'claude-opus-4',
  32768,
  0.4,
  'Use for enterprise codebases, monorepos, and projects with thousands of files',
  '{"model": "claude-opus-4", "temperature": 0.4, "max_tokens": 32768, "context_window": "extended", "file_prioritization": true, "smart_context": true, "max_files_in_context": 50, "prefer_recent_files": true, "cache_frequently_accessed": true}',
  ARRAY['large', 'codebase', 'context', 'optimization'],
  true,
  false,
  'published'
),
(
  'focused-feature',
  'Focused Feature',
  'Minimal context optimized for working on a single feature or component',
  'context',
  'claude-sonnet-4.5',
  8192,
  0.5,
  'Use when working on a single feature, bug fix, or small component',
  '{"model": "claude-sonnet-4.5", "temperature": 0.5, "max_tokens": 8192, "context_window": "minimal", "file_prioritization": true, "smart_context": false, "max_files_in_context": 10, "prefer_recent_files": true, "exclude_test_files": false}',
  ARRAY['focused', 'feature', 'minimal', 'fast'],
  true,
  false,
  'published'
),
(
  'cost-optimized',
  'Cost Optimized',
  'Budget-conscious settings using Haiku model with token limits',
  'budget',
  'claude-haiku-3.5',
  4096,
  0.5,
  'Use when you need to minimize costs while maintaining good functionality',
  '{"model": "claude-haiku-3.5", "temperature": 0.5, "max_tokens": 4096, "tools_allowed": ["all"], "tools_restricted": [], "token_budget_per_session": 50000, "warn_at_percentage": 75, "stop_at_percentage": 95, "prefer_cached_responses": true}',
  ARRAY['budget', 'cost', 'economical', 'haiku'],
  true,
  true,
  'published'
),
(
  'performance-first',
  'Performance First',
  'Optimized for speed with Sonnet model and parallel execution',
  'budget',
  'claude-sonnet-4.5',
  8192,
  0.5,
  'Use when speed is critical and you need rapid iteration',
  '{"model": "claude-sonnet-4.5", "temperature": 0.5, "max_tokens": 8192, "tools_allowed": ["all"], "tools_restricted": [], "parallel_tool_calls": true, "streaming_enabled": true, "cache_tool_results": true, "prefer_fast_operations": true}',
  ARRAY['performance', 'speed', 'fast', 'parallel'],
  true,
  false,
  'published'
)
ON CONFLICT (slug) DO UPDATE SET
  name = EXCLUDED.name,
  description = EXCLUDED.description,
  category = EXCLUDED.category,
  model = EXCLUDED.model,
  max_tokens = EXCLUDED.max_tokens,
  temperature = EXCLUDED.temperature,
  use_case = EXCLUDED.use_case,
  settings = EXCLUDED.settings,
  tags = EXCLUDED.tags,
  verified = EXCLUDED.verified,
  featured = EXCLUDED.featured,
  status = EXCLUDED.status,
  updated_at = NOW();
